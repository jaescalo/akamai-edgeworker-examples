import * as e from 'crypto';

var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype;}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var i=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,i.get?i:{enumerable:!0,get:function(){return e[t]}});})),r}var i={},n={},s={};Object.defineProperty(s,"__esModule",{value:!0});s.default=class{constructor(e){this.onRequestStatus=e;}getStatus(){return this.lastStatus}async requireStatus(){return this.lastStatus||await this.onRequestStatus(),this.lastStatus}notify(){var e;this.lastStatus&&(null===(e=this.listener)||void 0===e||e.call(this,this.lastStatus));}setListener(e){this.listener=e;}setStatus(e){this.lastStatus=e;}};var a={},o={},l={};function u(e){return e.indexOf("~")?e.replace(/~1/g,"/").replace(/~0/g,"~"):e}Object.defineProperty(l,"__esModule",{value:!0});class c{constructor(e,t=!1){if(t){const t=e;this.components=[t],this.isValid=""!==t,this.redactionName=t.startsWith("/")?`/${t.replace(/~/g,"~0").replace(/\//g,"~1")}`:t;}else {if(this.redactionName=e,""===e||"/"===e||e.match(/\/\/|(^\/.*~[^0|^1])|~$/))return this.isValid=!1,void(this.components=[]);!function(e){return !e.startsWith("/")}(e)?e.indexOf("/",1)<0?this.components=[u(e.slice(1))]:this.components=function(e){return (e.startsWith("/")?e.substring(1):e).split("/").map((e=>u(e)))}(e):this.components=[e],"_meta"===this.components[0]?this.isValid=!1:this.isValid=!0;}}get(e){const{components:t,isValid:r}=this;if(!r)return;let i=e;for(let e=0;e<t.length;e+=1){const r=t[e];if(null==i||!Object.prototype.hasOwnProperty.call(i,r)||"object"!=typeof i||Array.isArray(i))return;i=i[r];}return i}getComponent(e){return this.components[e]}get depth(){return this.components.length}get isKind(){return 1===this.components.length&&"kind"===this.components[0]}compare(e){return this.depth===e.depth&&this.components.every(((t,r)=>t===e.getComponent(r)))}}c.invalidReference=new c(""),l.default=c;var d={},h={};Object.defineProperty(h,"__esModule",{value:!0}),h.TypeValidators=h.DateValidator=h.Function=h.StringMatchingRegex=h.NumberWithMinimum=h.TypeArray=h.Type=h.FactoryOrInstance=void 0;class f{is(e){if(Array.isArray(e))return !1;const t=typeof e;return "function"===t||"object"===t}getType(){return "factory method or object"}}h.FactoryOrInstance=f;class p{constructor(e,t){this.typeName=e,this.typeOf=typeof t;}is(e){return !Array.isArray(e)&&typeof e===this.typeOf}getType(){return this.typeName}}h.Type=p;class v{constructor(e,t){this.typeName=e,this.typeOf=typeof t;}is(e){return !!Array.isArray(e)&&(!(e.length>0)||e.every((e=>typeof e===this.typeOf)))}getType(){return this.typeName}}h.TypeArray=v;class g extends p{constructor(e){super(`number with minimum value of ${e}`,0),this.min=e;}is(e){return typeof e===this.typeOf&&e>=this.min}}h.NumberWithMinimum=g;class y extends p{constructor(e){super(`string matching ${e}`,""),this.expression=e;}is(e){return !!e.match(this.expression)}}h.StringMatchingRegex=y;class m{is(e){return "function"==typeof e}getType(){return "function"}}h.Function=m;const b=/^\d\d\d\d-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d\d*)?(Z|[-+]\d\d(:\d\d)?)/;class _{is(e){return "number"==typeof e||"string"==typeof e&&b.test(e)}getType(){return "date"}}h.DateValidator=_;class E{static numberWithMin(e){return new g(e)}static stringMatchingRegex(e){return new y(e)}}h.TypeValidators=E,E.String=new p("string",""),E.Number=new p("number",0),E.ObjectOrFactory=new f,E.Object=new p("object",{}),E.StringArray=new v("string[]",""),E.Boolean=new p("boolean",!0),E.Function=new m,E.Date=new _,Object.defineProperty(d,"__esModule",{value:!0});const w=l,O=h,S=O.TypeValidators.stringMatchingRegex(/^(\w|\.|-)+$/),x="user";function k(e){return e.includes("%")||e.includes(":")?e.replace(/%/g,"%25").replace(/:/g,"%3A"):e}function P(e){return S.is(e)&&"kind"!==e}function A(e){return O.TypeValidators.String.is(e)&&""!==e}function I(e,t=!1){return e?e.map((e=>new w.default(e,t))):[]}class R{constructor(e,t,r){this.isMulti=!1,this.isUser=!1,this.wasLegacy=!1,this.contexts={},this.kind=t,this.valid=e,this.message=r;}static contextForError(e,t){return new R(!1,e,t)}static getValueFromContext(e,t){if(t&&e.isValid)return 1===e.depth&&"anonymous"===e.getComponent(0)?!!(null==t?void 0:t.anonymous):e.get(t)}contextForKind(e){return this.isMulti?this.contexts[e]:this.kind===e?this.context:void 0}static fromMultiKindContext(e){const t=Object.keys(e).filter((e=>"kind"!==e)),r=t.every(P);if(!t.length)return R.contextForError("multi","A multi-kind context must contain at least one kind");if(!r)return R.contextForError("multi","Context contains invalid kinds");const i={};let n=!0;const s=t.reduce(((t,r)=>{var s;const a=e[r];var o;return (o=a)&&O.TypeValidators.Object.is(o)?(t[r]=a,i[r]=I(null===(s=a._meta)||void 0===s?void 0:s.privateAttributes)):n=!1,t}),{});if(!n)return R.contextForError("multi","Context contained contexts that were not objects");if(!Object.values(s).every((e=>A(e.key))))return R.contextForError("multi","Context contained invalid keys");if(1===t.length){const e=t[0],r=new R(!0,e);return r.context=s[e],r.privateAttributeReferences=i,r.isUser="user"===e,r}const a=new R(!0,e.kind);return a.contexts=s,a.privateAttributeReferences=i,a.isMulti=!0,a}static fromSingleKindContext(e){var t;const{key:r,kind:i}=e,n=P(i),s=A(r);if(!n)return R.contextForError(null!=i?i:"unknown","The kind was not valid for the context");if(!s)return R.contextForError(i,"The key for the context was not valid");const a=I(null===(t=e._meta)||void 0===t?void 0:t.privateAttributes),o=new R(!0,i);return o.isUser="user"===i,o.context=e,o.privateAttributeReferences={[i]:a},o}static fromLegacyUser(e){if(!(void 0!==e.key&&null!==e.key))return R.contextForError("user","The key for the context was not valid");const t=new R(!0,"user");return t.isUser=!0,t.wasLegacy=!0,t.context=function(e){const t=Object.assign(Object.assign({},e.custom||[]),{kind:"user",key:String(e.key)});if(null!=e.anonymous){const r=!!e.anonymous;delete t.anonymous,t.anonymous=r;}return null!==e.name&&void 0!==e.name&&(t.name=e.name),null!==e.ip&&void 0!==e.ip&&(t.ip=e.ip),null!==e.firstName&&void 0!==e.firstName&&(t.firstName=e.firstName),null!==e.lastName&&void 0!==e.lastName&&(t.lastName=e.lastName),null!==e.email&&void 0!==e.email&&(t.email=e.email),null!==e.avatar&&void 0!==e.avatar&&(t.avatar=e.avatar),null!==e.country&&void 0!==e.country&&(t.country=e.country),t}(e),t.privateAttributeReferences={user:I(e.privateAttributeNames,!0)},t}static fromLDContext(e){return e?function(e){return "kind"in e&&O.TypeValidators.String.is(e.kind)&&"multi"!==e.kind}(e)?R.fromSingleKindContext(e):function(e){return "kind"in e&&O.TypeValidators.String.is(e.kind)&&"multi"===e.kind}(e)?R.fromMultiKindContext(e):function(e){return !("kind"in e)||null===e.kind||void 0===e.kind}(e)?R.fromLegacyUser(e):R.contextForError("unknown","Context was not of a valid kind"):R.contextForError("unknown","No context specified. Returning default value")}valueForKind(e,t=x){return e.isKind?this.kinds:R.getValueFromContext(e,this.contextForKind(t))}key(e=x){var t;return null===(t=this.contextForKind(e))||void 0===t?void 0:t.key}get isMultiKind(){return this.isMulti}get canonicalKey(){return this.isUser?this.context.key:this.isMulti?Object.keys(this.contexts).sort().map((e=>`${e}:${k(this.contexts[e].key)}`)).join(":"):`${this.kind}:${k(this.context.key)}`}get kinds(){return this.isMulti?Object.keys(this.contexts):[this.kind]}get kindsAndKeys(){return this.isMulti?Object.entries(this.contexts).reduce(((e,[t,r])=>(e[t]=r.key,e)),{}):{[this.kind]:this.context.key}}privateAttributes(e){var t;return (null===(t=this.privateAttributeReferences)||void 0===t?void 0:t[e])||[]}getContexts(){return this.isMulti?Object.entries(this.contexts):[[this.kind,this.context]]}get legacy(){return this.wasLegacy}}R.userKind=x,d.default=R;var M={};Object.defineProperty(M,"__esModule",{value:!0});const j=l,D=["key","kind","_meta","anonymous"].map((e=>new j.default(e,!0))),T=["name","ip","firstName","lastName","email","avatar","country"];M.default=class{constructor(e,t){this.allAttributesPrivate=e,this.privateAttributes=t;}filter(e){const t=e.getContexts();if(1===t.length)return this.filterSingleKind(e,t[0][1],t[0][0]);const r={kind:"multi"};return t.forEach((([t,i])=>{r[t]=this.filterSingleKind(e,i,t);})),r}getAttributesToFilter(e,t,r){return (this.allAttributesPrivate?Object.keys(t).map((e=>new j.default(e,!0))):[...this.privateAttributes,...e.privateAttributes(r)]).filter((e=>!D.some((t=>t.compare(e)))))}filterSingleKind(e,t,r){const{cloned:i,excluded:n}=function(e,t){const r=[],i={},n=[];for(r.push(...Object.keys(e).map((t=>({key:t,ptr:[t],source:e,parent:i,visited:[e]}))));r.length;){const e=r.pop(),i=t.find((t=>{return r=t,i=e.ptr,r.depth===i.length&&i.every(((e,t)=>e===r.getComponent(t)));var r,i;}));if(i)n.push(i.redactionName);else {const t=e.source[e.key];null===t?e.parent[e.key]=t:Array.isArray(t)?e.parent[e.key]=[...t]:"object"==typeof t?e.visited.includes(t)||(e.parent[e.key]={},r.push(...Object.keys(t).map((r=>({key:r,ptr:[...e.ptr,r],source:t,parent:e.parent[e.key],visited:[...e.visited,t]}))))):e.parent[e.key]=t;}}return {cloned:i,excluded:n.sort()}}(t,this.getAttributesToFilter(e,t,r));return e.legacy&&T.forEach((e=>{e in i&&(i[e]=String(i[e]));})),n.length&&(i._meta||(i._meta={}),i._meta.redactedAttributes=n),i._meta&&(delete i._meta.privateAttributes,0===Object.keys(i._meta).length&&delete i._meta),i}};var C={},F={},$={};Object.defineProperty($,"__esModule",{value:!0});var N={};Object.defineProperty(N,"__esModule",{value:!0});var B={};Object.defineProperty(B,"__esModule",{value:!0});var L={};Object.defineProperty(L,"__esModule",{value:!0});var V={};Object.defineProperty(V,"__esModule",{value:!0});var z,U,H,K={};Object.defineProperty(K,"__esModule",{value:!0}),z=F,U=t&&t.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n);}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r];}),H=t&&t.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||U(t,e,r);},Object.defineProperty(z,"__esModule",{value:!0}),H($,z),H(N,z),H(B,z),H(L,z),H(V,z),H(K,z);var q={},G={};Object.defineProperty(G,"__esModule",{value:!0});var W={};Object.defineProperty(W,"__esModule",{value:!0});var X={};Object.defineProperty(X,"__esModule",{value:!0}),function(e){var r=t&&t.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n);}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r];}),i=t&&t.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i);};Object.defineProperty(e,"__esModule",{value:!0}),i(G,e),i(W,e),i(X,e);}(q);var J={},Y={};Object.defineProperty(Y,"__esModule",{value:!0});var Z={};Object.defineProperty(Z,"__esModule",{value:!0});var Q={};Object.defineProperty(Q,"__esModule",{value:!0});var ee={};Object.defineProperty(ee,"__esModule",{value:!0}),function(e){var r=t&&t.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n);}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r];}),i=t&&t.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i);};Object.defineProperty(e,"__esModule",{value:!0}),i(Y,e),i(Z,e),i(Q,e),i(ee,e);}(J);var te={};Object.defineProperty(te,"__esModule",{value:!0});var re={},ie={};Object.defineProperty(ie,"__esModule",{value:!0});var ne={};Object.defineProperty(ne,"__esModule",{value:!0});var se={};Object.defineProperty(se,"__esModule",{value:!0});var ae={};Object.defineProperty(ae,"__esModule",{value:!0});var oe={};Object.defineProperty(oe,"__esModule",{value:!0});var le={};Object.defineProperty(le,"__esModule",{value:!0}),function(e){var r=t&&t.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n);}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r];}),i=t&&t.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i);};Object.defineProperty(e,"__esModule",{value:!0}),i(ie,e),i(ne,e),i(se,e),i(ae,e),i(oe,e),i(le,e);}(re);var ue,ce,de={},he={};Object.defineProperty(he,"__esModule",{value:!0}),he.LDDeliveryStatus=he.LDEventType=void 0,function(e){e[e.AnalyticsEvents=0]="AnalyticsEvents",e[e.DiagnosticEvent=1]="DiagnosticEvent";}(ue||(he.LDEventType=ue={})),function(e){e[e.Succeeded=0]="Succeeded",e[e.Failed=1]="Failed",e[e.FailedAndMustShutDown=2]="FailedAndMustShutDown";}(ce||(he.LDDeliveryStatus=ce={})),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LDEventType=e.LDDeliveryStatus=void 0;const t=he;Object.defineProperty(e,"LDDeliveryStatus",{enumerable:!0,get:function(){return t.LDDeliveryStatus}}),Object.defineProperty(e,"LDEventType",{enumerable:!0,get:function(){return t.LDEventType}});}(de),function(e){var r=t&&t.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n);}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r];}),i=t&&t.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i);};Object.defineProperty(e,"__esModule",{value:!0}),e.subsystem=void 0,i(F,e),i(q,e),i(J,e),i(te,e),i(re,e),e.subsystem=de;}(C);var fe={},pe={},ve={};Object.defineProperty(ve,"__esModule",{value:!0});const ge=h;function ye(e){if("string"==typeof e)return e;if(void 0===e)return "undefined";if(null===e)return "null";if(Object.prototype.hasOwnProperty.call(e,"toString"))try{return e.toString()}catch(e){}if("bigint"==typeof e)return `${e}n`;try{return JSON.stringify(e)}catch(e){return e instanceof TypeError&&e.message.indexOf("circular")>=0?"[Circular]":"[Not Stringifiable]"}}const me={s:e=>ye(e),d:e=>function(e){return "symbol"==typeof e?"NaN":"bigint"==typeof e?`${e}n`:String(Number(e))}(e),i:e=>function(e){return "symbol"==typeof e?"NaN":"bigint"==typeof e?`${e}n`:String(parseInt(e,10))}(e),f:e=>function(e){return "symbol"==typeof e?"NaN":String(parseFloat(e))}(e),j:e=>ye(e),o:e=>ye(e),O:e=>ye(e),c:()=>""};ve.default=function(...e){var t;const r=e.shift();if(ge.TypeValidators.String.is(r)){let i="",n=0;for(;n<r.length;){const s=r.charAt(n);if("%"===s){if(n+1<r.length){const s=r.charAt(n+1);if(s in me&&e.length){const r=e.shift();i+=null===(t=me[s])||void 0===t?void 0:t.call(me,r);}else i+="%"===s?"%":`%${s}`;n+=2;}}else i+=s,n+=1;}return e.length&&(i.length&&(i+=" "),i+=e.map(ye).join(" ")),i}return e.map(ye).join(" ")},Object.defineProperty(pe,"__esModule",{value:!0});const be=ve,_e={debug:0,info:1,warn:2,error:3,none:4},Ee=["debug","info","warn","error","none"];class we{static get(){return new we({})}constructor(e){var t,r,i;this.logLevel=null!==(r=_e[null!==(t=e.level)&&void 0!==t?t:"info"])&&void 0!==r?r:_e.info,this.name=null!==(i=e.name)&&void 0!==i?i:"LaunchDarkly",this.destination=e.destination,this.formatter=e.formatter;}tryFormat(...e){var t;try{return this.formatter?null===(t=this.formatter)||void 0===t?void 0:t.call(this,...e):(0,be.default)(...e)}catch(t){return (0, be.default)(...e)}}tryWrite(e){try{this.destination(e);}catch(t){console.error(e);}}log(e,t){if(e>=this.logLevel){const r=`${Ee[e]}: [${this.name}]`;try{this.destination?this.tryWrite(`${r} ${this.tryFormat(...t)}`):console.error(...t);}catch(e){console.error(...t);}}}error(...e){this.log(_e.error,e);}warn(...e){this.log(_e.warn,e);}info(...e){this.log(_e.info,e);}debug(...e){this.log(_e.debug,e);}}pe.default=we;var Oe={};Object.defineProperty(Oe,"__esModule",{value:!0});const Se=h,xe={error:Se.TypeValidators.Function,warn:Se.TypeValidators.Function,info:Se.TypeValidators.Function,debug:Se.TypeValidators.Function};Oe.default=class{constructor(e,t){Object.entries(xe).forEach((([t,r])=>{if(!r.is(e[t]))throw new Error(`Provided logger instance must support logger.${t}(...) method`)})),this.logger=e,this.fallback=t;}log(e,t){try{this.logger[e](...t);}catch(r){this.fallback[e](...t);}}error(...e){this.log("error",e);}warn(...e){this.log("warn",e);}info(...e){this.log("info",e);}debug(...e){this.log("debug",e);}},Object.defineProperty(fe,"__esModule",{value:!0}),fe.SafeLogger=fe.BasicLogger=void 0;const ke=pe;fe.BasicLogger=ke.default;const Pe=Oe;fe.SafeLogger=Pe.default;var Ae={},Ie={},Re={};Object.defineProperty(Re,"__esModule",{value:!0});Re.default=class{static deprecated(e,t){return `"${e}" is deprecated, please use "${t}"`}static optionBelowMinimum(e,t,r){return `Config option "${e}" had invalid value of ${t}, using minimum of ${r} instead`}static unknownOption(e){return `Ignoring unknown config option "${e}"`}static wrongOptionType(e,t,r){return `Config option "${e}" should be of type ${t}, got ${r}, using default value`}static wrongOptionTypeBoolean(e,t){return `Config option "${e}" should be a boolean, got ${t}, converting to boolean`}static invalidTagValue(e){return `Config option "${e}" must only contain letters, numbers, ., _ or -.`}static tagValueTooLong(e){return `Value of "${e}" was longer than 64 characters and was discarded.`}static partialEndpoint(e){return `You have set custom uris without specifying the ${e} URI; connections may not work properly`}},Object.defineProperty(Ie,"__esModule",{value:!0});const Me=Re,je=h.TypeValidators.stringMatchingRegex(/^(\w|\.|-)+$/),De=(e,t)=>je.is(e)?e.length>64?{valid:!1,message:Me.default.tagValueTooLong(t)}:{valid:!0}:{valid:!1,message:Me.default.invalidTagValue(t)};Ie.default=class{constructor(e){var t,r;const i={},n=null==e?void 0:e.application;if(null!==(null==n?void 0:n.id)&&void 0!==(null==n?void 0:n.id)){const{valid:r,message:s}=De(n.id,"application.id");r?i["application-id"]=[n.id]:null===(t=e.logger)||void 0===t||t.warn(s);}if(null!==(null==n?void 0:n.version)&&void 0!==(null==n?void 0:n.version)){const{valid:t,message:s}=De(n.version,"application.version");t?i["application-version"]=[n.version]:null===(r=e.logger)||void 0===r||r.warn(s);}const s=Object.keys(i);s.length&&(this.value=s.sort().flatMap((e=>i[e].sort().map((t=>`${e}/${t}`)))).join(" "));}};var Te={};Object.defineProperty(Te,"__esModule",{value:!0});Te.default=class{constructor(e,t,r){this.platform=r,this.basicConfiguration={logger:t.logger,offline:t.offline,sdkKey:e,serviceEndpoints:t.serviceEndpoints};}};var Ce={};function Fe(e){return e.replace(/\/+$/,"")}Object.defineProperty(Ce,"__esModule",{value:!0});Ce.default=class{constructor(e,t,r){this.streaming=Fe(e),this.polling=Fe(t),this.events=Fe(r);}},Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.ClientContext=Ae.ServiceEndpoints=Ae.OptionMessages=Ae.ApplicationTags=void 0;const $e=Ie;Ae.ApplicationTags=$e.default;const Ne=Te;Ae.ClientContext=Ne.default;const Be=Re;Ae.OptionMessages=Be.default;const Le=Ce;Ae.ServiceEndpoints=Le.default;var Ve={},ze={};Object.defineProperty(ze,"__esModule",{value:!0}),ze.default=()=>{},Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.noop=void 0;const Ue=ze;Ve.noop=Ue.default;var He={},Ke={},qe={},Ge={},We={};Object.defineProperty(We,"__esModule",{value:!0}),We.isIdentify=We.isCustom=We.isFeature=void 0,We.isFeature=function(e){return "feature"===e.kind},We.isCustom=function(e){return "custom"===e.kind},We.isIdentify=function(e){return "identify"===e.kind};var Xe={};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.default=class{constructor(e,t,r,i,n,s){this.count=e,this.key=t,this.value=r,this.version=n,this.variation=s,this.default=i;}increment(){this.count+=1;}},Object.defineProperty(Ge,"__esModule",{value:!0});const Je=We,Ye=Xe;Ge.default=class{constructor(){this.startDate=0,this.endDate=0,this.counters={},this.contextKinds={};}summarizeEvent(e){if((0, Je.isFeature)(e)){const t=function(e){return `${e.key}:${null!==e.variation&&void 0!==e.variation?e.variation:""}:${null!==e.version&&void 0!==e.version?e.version:""}`}(e),r=this.counters[t];let i=this.contextKinds[e.key];i||(i=new Set,this.contextKinds[e.key]=i),e.context.kinds.forEach((e=>i.add(e))),r?r.increment():this.counters[t]=new Ye.default(1,e.key,e.value,e.default,e.version,e.variation),(0===this.startDate||e.creationDate<this.startDate)&&(this.startDate=e.creationDate),e.creationDate>this.endDate&&(this.endDate=e.creationDate);}}getSummary(){const e=Object.values(this.counters).reduce(((e,t)=>{let r=e[t.key];r||(r={default:t.default,counters:[],contextKinds:[...this.contextKinds[t.key]]},e[t.key]=r);const i={value:t.value,count:t.count};return void 0!==t.variation&&null!==t.variation&&(i.variation=t.variation),void 0!==t.version&&null!==t.version?i.version=t.version:i.unknown=!0,r.counters.push(i),e}),{});return {startDate:this.startDate,endDate:this.endDate,features:e,kind:"summary"}}clearSummary(){this.startDate=0,this.endDate=0,this.counters={},this.contextKinds={};}};var Ze={};Object.defineProperty(Ze,"__esModule",{value:!0});class Qe extends Error{constructor(e){super(e),this.name="LaunchDarklyInvalidSDKKeyError";}}Ze.default=Qe,Object.defineProperty(qe,"__esModule",{value:!0});const et=he,tt=l,rt=M,it=Ge,nt=We,st=Ze;qe.default=class{constructor(e,t,r,i,n){if(this.eventSender=r,this.contextDeduplicator=i,this.diagnosticsManager=n,this.summarizer=new it.default,this.queue=[],this.lastKnownPastTime=0,this.droppedEvents=0,this.deduplicatedUsers=0,this.exceededCapacity=!1,this.eventsInLastBatch=0,this.shutdown=!1,this.flushUsersTimer=null,this.capacity=e.eventsCapacity,this.logger=t.basicConfiguration.logger,this.contextFilter=new rt.default(e.allAttributesPrivate,e.privateAttributes.map((e=>new tt.default(e)))),void 0!==this.contextDeduplicator.flushInterval&&(this.flushUsersTimer=void this.contextDeduplicator.flushInterval),this.flushTimer=void e.flushInterval,this.diagnosticsManager){const t=n.createInitEvent();this.postDiagnosticEvent(t),this.diagnosticsTimer=void e.diagnosticRecordingInterval;}}postDiagnosticEvent(e){this.eventSender.sendEventData(et.LDEventType.DiagnosticEvent,e);}close(){clearInterval(this.flushTimer),this.flushUsersTimer&&clearInterval(this.flushUsersTimer),this.diagnosticsTimer&&clearInterval(this.diagnosticsTimer);}async flush(){var e;if(this.shutdown)throw new st.default("Events cannot be posted because SDK key is invalid");const t=this.queue;this.queue=[];const r=this.summarizer.getSummary();this.summarizer.clearSummary(),Object.keys(r.features).length&&t.push(r),t.length&&(this.eventsInLastBatch=t.length,null===(e=this.logger)||void 0===e||e.debug("Flushing %d events",t.length),await this.tryPostingEvents(t));}sendEvent(e){if(this.shutdown)return;this.summarizer.summarizeEvent(e);const t=(0, nt.isFeature)(e),r=t&&e.trackEvents||!t,i=this.shouldDebugEvent(e),n=(0, nt.isIdentify)(e),s=this.contextDeduplicator.processContext(e.context);s||n||(this.deduplicatedUsers+=1);s&&!n&&this.enqueue({kind:"index",creationDate:e.creationDate,context:this.contextFilter.filter(e.context)}),r&&this.enqueue(this.makeOutputEvent(e,!1)),i&&this.enqueue(this.makeOutputEvent(e,!0));}makeOutputEvent(e,t){switch(e.kind){case"feature":{const r={kind:t?"debug":"feature",creationDate:e.creationDate,key:e.key,value:e.value,default:e.default,prereqOf:e.prereqOf};return void 0!==e.variation&&(r.variation=e.variation),void 0!==e.version&&(r.version=e.version),e.reason&&(r.reason=e.reason),t?r.context=this.contextFilter.filter(e.context):r.contextKeys=e.context.kindsAndKeys,r}case"identify":return {kind:"identify",creationDate:e.creationDate,context:this.contextFilter.filter(e.context)};case"custom":{const t={kind:"custom",creationDate:e.creationDate,key:e.key,contextKeys:e.context.kindsAndKeys};return void 0!==e.data&&(t.data=e.data),void 0!==e.metricValue&&(t.metricValue=e.metricValue),t}default:return e}}enqueue(e){var t;this.queue.length<this.capacity?(this.queue.push(e),this.exceededCapacity=!1):(this.exceededCapacity||(this.exceededCapacity=!0,null===(t=this.logger)||void 0===t||t.warn("Exceeded event queue capacity. Increase capacity to avoid dropping events.")),this.droppedEvents+=1);}shouldDebugEvent(e){return (0, nt.isFeature)(e)&&e.debugEventsUntilDate&&e.debugEventsUntilDate>this.lastKnownPastTime&&e.debugEventsUntilDate>Date.now()}async tryPostingEvents(e){const t=await this.eventSender.sendEventData(et.LDEventType.AnalyticsEvents,e);if(t.status===et.LDDeliveryStatus.FailedAndMustShutDown&&(this.shutdown=!0),t.serverTime&&(this.lastKnownPastTime=t.serverTime),t.error)throw t.error}};var at={};Object.defineProperty(at,"__esModule",{value:!0});at.default=class{constructor(e,t,r,i){this.key=t,this.data=r,this.metricValue=i,this.kind="custom",this.creationDate=Date.now(),this.context=e;}};var ot={};Object.defineProperty(ot,"__esModule",{value:!0});ot.default=class{constructor(e,t,r,i,n,s,a,o,l,u,c){var d;this.key=r,this.kind="feature",this.creationDate=Date.now(),this.context=t,this.default=i,this.variation=null!==(d=n.variationIndex)&&void 0!==d?d:void 0,this.value=n.value,void 0!==s&&(this.version=s),void 0!==a&&(this.variation=a),void 0!==o&&(this.trackEvents=o),void 0!==l&&(this.prereqOf=l),void 0!==u&&(this.reason=u),void 0!==c&&(this.debugEventsUntilDate=c);}};var lt={};Object.defineProperty(lt,"__esModule",{value:!0});lt.default=class{constructor(e){this.kind="identify",this.creationDate=Date.now(),this.context=e;}},Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.EventProcessor=Ke.InputIdentifyEvent=Ke.InputEvalEvent=Ke.InputCustomEvent=void 0;const ut=qe;Ke.EventProcessor=ut.default;const ct=at;Ke.InputCustomEvent=ct.default;const dt=ot;Ke.InputEvalEvent=dt.default;const ht=lt;Ke.InputIdentifyEvent=ht.default,function(e){var r=t&&t.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n);}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r];}),i=t&&t.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i);};Object.defineProperty(e,"__esModule",{value:!0}),i(Ke,e);}(He),function(e){var r=t&&t.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n);}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r];}),i=t&&t.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i);};Object.defineProperty(e,"__esModule",{value:!0}),e.ContextFilter=e.Context=e.AttributeReference=e.internal=void 0;const n=l;e.AttributeReference=n.default;const s=d;e.Context=s.default;const a=M;e.ContextFilter=a.default,i(C,e),i(h,e),i(fe,e),i(Ae,e),i(Ve,e),e.internal=He;}(o);var ft={},pt={};Object.defineProperty(pt,"__esModule",{value:!0});pt.default=class{constructor(e){this.keyMap=new Map,this.head=0,this.tail=0,this.size=0;const{max:t}=e;this.max=t,this.values=new Array(t),this.keys=new Array(t),this.next=new Uint32Array(t),this.prev=new Uint32Array(t),e.maxAge?(this.lastUpdated=new Array(t).fill(0),this.maxAge=e.maxAge):(this.lastUpdated=[],this.maxAge=0);}set(e,t){let r=this.keyMap.get(e);void 0===r?(r=this.index(),this.keys[r]=e,this.keyMap.set(e,r),this.next[this.tail]=r,this.prev[r]=this.tail,this.tail=r,this.size+=1):this.setTail(r),this.values[r]=t,this.maxAge&&(this.lastUpdated[r]=Date.now());}get(e){const t=this.keyMap.get(e);if(void 0!==t){if(this.maxAge){const e=this.lastUpdated[t];if(Date.now()-e>this.maxAge)return}return this.setTail(t),this.maxAge&&(this.lastUpdated[t]=Date.now()),this.values[t]}}clear(){this.head=0,this.tail=0,this.size=0,this.values.fill(void 0),this.keys.fill(void 0),this.next.fill(0),this.prev.fill(0);}index(){return 0===this.size?this.tail:this.size===this.max?this.evict():this.size}evict(){const{head:e}=this,t=this.keys[e];return this.head=this.next[e],this.keyMap.delete(t),this.size-=1,e}link(e,t){this.prev[t]=e,this.next[e]=t;}setTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.link(this.prev[e],this.next[e]),this.link(this.tail,e),this.tail=e);}},Object.defineProperty(ft,"__esModule",{value:!0});const vt=o,gt=s,yt=pt;ft.default=class{constructor(e,t,r,i){this.store=e,this.logger=r,this.crypto=i,this.statusProvider=new gt.default((async()=>this.pollStoreAndUpdateStatus())),this.staleTimeMs=1e3*(vt.TypeValidators.Number.is(t.staleAfter)&&t.staleAfter>0?t.staleAfter:120);vt.TypeValidators.Number.is(t.statusPollInterval)&&t.statusPollInterval>0&&t.statusPollInterval;this.pollHandle=e?void 0:null,e&&(this.cache=new yt.default({max:t.userCacheSize||1e3,maxAge:1e3*(t.userCacheTime||5)}));}close(){this.pollHandle&&(clearInterval(this.pollHandle),this.pollHandle=void 0),this.store&&this.store.close();}async getUserMembership(e){var t,r,i;if(!this.store)return;const n=null===(t=this.cache)||void 0===t?void 0:t.get(e);let s;if(n)s=n.membership;else try{s=await this.store.getUserMembership(this.hashForUserKey(e));const t={membership:s};null===(r=this.cache)||void 0===r||r.set(e,t);}catch(e){return null===(i=this.logger)||void 0===i||i.error(`Big Segment store membership query returned error: ${e}`),[null,"STORE_ERROR"]}this.statusProvider.getStatus()||await this.pollStoreAndUpdateStatus();const a=this.statusProvider.getStatus();return a.available?[s||null,a.stale?"STALE":"HEALTHY"]:[s||null,"STORE_ERROR"]}async pollStoreAndUpdateStatus(){var e,t,r;if(!this.store)return void this.statusProvider.setStatus({available:!1,stale:!1});let i;null===(e=this.logger)||void 0===e||e.debug("Querying Big Segment store status");try{const e=await this.store.getMetadata();i={available:!0,stale:!e||!e.lastUpToDate||this.isStale(e.lastUpToDate)};}catch(e){null===(t=this.logger)||void 0===t||t.error(`Big Segment store status query returned error: ${e}`),i={available:!1,stale:!1};}const n=this.statusProvider.getStatus();n&&n.available===i.available&&n.stale===i.stale||(null===(r=this.logger)||void 0===r||r.debug("Big Segment store status changed from %s to %s",JSON.stringify(n),JSON.stringify(i)),this.statusProvider.setStatus(i),this.statusProvider.notify());}hashForUserKey(e){const t=this.crypto.createHash("sha256");return t.update(e),t.digest("base64")}isStale(e){return Date.now()-e>=this.staleTimeMs}};var mt={};Object.defineProperty(mt,"__esModule",{value:!0});class bt{}bt.missingContextKeyNoEvent="Context was unspecified or had no key; event will not be sent",mt.default=bt;var _t={},Et={};Object.defineProperty(Et,"__esModule",{value:!0});class wt{}wt.Features={namespace:"features",streamApiPath:"/flags/",requestPath:"/sdk/latest-flags/"},wt.Segments={namespace:"segments",streamApiPath:"/segments/",requestPath:"/sdk/latest-segments/"},Et.default=wt;var Ot={},St={};Object.defineProperty(St,"__esModule",{value:!0});St.default=class{constructor(){this.itemsByNamespace={};}get(e,t){var r;return null===(r=this.itemsByNamespace[e])||void 0===r?void 0:r[t]}set(e,t,r){e in this.itemsByNamespace||(this.itemsByNamespace[e]={}),this.itemsByNamespace[e][t]=r;}remove(e,t){const r=this.itemsByNamespace[e];r&&delete r[t];}removeAll(){this.itemsByNamespace={};}enumerate(e){Object.entries(this.itemsByNamespace).forEach((([t,r])=>{Object.entries(r).forEach((([r,i])=>{e(t,r,i);}));}));}mergeFrom(e){e.enumerate(this.set.bind(this));}},Object.defineProperty(Ot,"__esModule",{value:!0});const xt=St;Ot.default=class{constructor(){this.dependenciesFrom=new xt.default,this.dependenciesTo=new xt.default;}updateDependenciesFrom(e,t,r){const i=this.dependenciesFrom.get(e,t);null==i||i.enumerate(((r,i)=>{const n=this.dependenciesTo.get(r,i);null==n||n.remove(e,t);})),this.dependenciesFrom.set(e,t,r),null==r||r.enumerate(((r,i)=>{let n=this.dependenciesTo.get(r,i);n||(n=new xt.default,this.dependenciesTo.set(r,i,n)),n.set(e,t,!0);}));}updateModifiedItems(e,t,r){if(!e.get(t,r)){e.set(t,r,!0);const i=this.dependenciesTo.get(t,r);null==i||i.enumerate(((t,r)=>{this.updateModifiedItems(e,t,r);}));}}reset(){this.dependenciesFrom.removeAll(),this.dependenciesTo.removeAll();}},Object.defineProperty(_t,"__esModule",{value:!0});const kt=Et,Pt=Ot,At=St;function It(e,t){var r,i;const n=new At.default,s=e===kt.default.Features.namespace,a=e===kt.default.Segments.namespace;if(s){const i=t;null===(r=null==i?void 0:i.prerequisites)||void 0===r||r.forEach((t=>{n.set(e,t.key,!0);}));}if(s||a){const e=t;null===(i=null==e?void 0:e.rules)||void 0===i||i.forEach((e=>{var t;null===(t=e.clauses)||void 0===t||t.forEach((e=>{"segmentMatch"===e.op&&e.values.forEach((e=>{n.set(kt.default.Segments.namespace,e,!0);}));}));}));}return n}_t.default=class{constructor(e,t,r){this.featureStore=e,this.hasEventListeners=t,this.onChange=r,this.dependencyTracker=new Pt.default;}init(e,t){const r=this.hasEventListeners(),i=i=>{this.featureStore.init(e,(()=>{Promise.resolve().then((()=>{if(this.dependencyTracker.reset(),Object.entries(e).forEach((([e,t])=>{Object.keys(t||{}).forEach((r=>{const i=t[r];this.dependencyTracker.updateDependenciesFrom(e,r,It(e,i));}));})),r){const t=new At.default;Object.keys(e).forEach((r=>{const n=(null==i?void 0:i[r])||{},s=e[r],a=Object.assign(Object.assign({},n),s);Object.keys(a).forEach((e=>{this.addIfModified(r,e,n&&n[e],s&&s[e],t);}));})),this.sendChangeEvents(t);}})),null==t||t();}));};r?this.featureStore.all(kt.default.Features,(e=>{this.featureStore.all(kt.default.Segments,(t=>{const r={[kt.default.Features.namespace]:e,[kt.default.Segments.namespace]:t};i(r);}));})):i();}upsert(e,t,r){const{key:i}=t,n=this.hasEventListeners(),s=s=>{this.featureStore.upsert(e,t,(()=>{Promise.resolve().then((()=>{if(this.dependencyTracker.updateDependenciesFrom(e.namespace,i,It(e.namespace,t)),n){const r=new At.default;this.addIfModified(e.namespace,i,s,t,r),this.sendChangeEvents(r);}})),null==r||r();}));};n?this.featureStore.get(e,i,s):s();}addIfModified(e,t,r,i,n){i&&r&&i.version<=r.version||this.dependencyTracker.updateModifiedItems(n,e,t);}sendChangeEvents(e){e.enumerate(((e,t)=>{e===kt.default.Features.namespace&&this.onChange(t);}));}};var Rt={};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.default=class{start(e){}stop(){}close(){}};var Mt={},jt={};Object.defineProperty(jt,"__esModule",{value:!0}),jt.isHttpRecoverable=jt.LDClientError=jt.LDUnexpectedResponseError=jt.LDStreamingError=jt.LDPollingError=void 0;class Dt extends Error{constructor(e){super(e),this.name="LaunchDarklyPollingError";}}jt.LDPollingError=Dt;class Tt extends Error{constructor(e,t){super(e),this.code=t,this.name="LaunchDarklyStreamingError";}}jt.LDStreamingError=Tt;class Ct extends Error{constructor(e){super(e),this.name="LaunchDarklyUnexpectedResponseError";}}jt.LDUnexpectedResponseError=Ct;class Ft extends Error{constructor(e){super(e),this.name="LaunchDarklyClientError";}}jt.LDClientError=Ft,jt.isHttpRecoverable=function(e){return !(e>=400&&e<500)||(400===e||408===e||429===e)};var $t={};Object.defineProperty($t,"__esModule",{value:!0}),$t.deserializeSegment=$t.serializeSegment=$t.deserializeFlag=$t.serializeFlag=$t.deserializeDelete=$t.deserializePatch=$t.deserializePoll=$t.deserializeAll=$t.processSegment=$t.processFlag=$t.replacer=$t.reviver=void 0;const Nt=o,Bt=Et,Lt=100;function Vt(e,t){if(null!==t)return t}function zt(e,t){if(!(t instanceof Nt.AttributeReference||Array.isArray(t)&&t[0]&&t[0]instanceof Nt.AttributeReference))return t.generated_includedSet&&(t.included=[...t.generated_includedSet],delete t.generated_includedSet),t.generated_excludedSet&&(t.excluded=[...t.generated_excludedSet],delete t.generated_excludedSet),t.includedContexts&&t.includedContexts.forEach((e=>{e.generated_valuesSet&&(e.values=[...e.generated_valuesSet]),delete e.generated_valuesSet;})),t.excludedContexts&&t.excludedContexts.forEach((e=>{e.generated_valuesSet&&(e.values=[...e.generated_valuesSet]),delete e.generated_valuesSet;})),t}function Ut(e){e&&e.bucketBy&&(e.bucketByAttributeReference=new Nt.AttributeReference(e.bucketBy,!e.contextKind));}function Ht(e){var t;if(e.fallthrough&&e.fallthrough.rollout){Ut(e.fallthrough.rollout);}null===(t=null==e?void 0:e.rules)||void 0===t||t.forEach((e=>{var t;Ut(e.rollout),null===(t=null==e?void 0:e.clauses)||void 0===t||t.forEach((e=>{e&&e.attribute?e.attributeReference=new Nt.AttributeReference(e.attribute,!e.contextKind):e&&(e.attributeReference=Nt.AttributeReference.invalidReference);}));}));}function Kt(e){var t,r,i,n,s;(null===(t=null==e?void 0:e.included)||void 0===t?void 0:t.length)&&e.included.length>Lt&&(e.generated_includedSet=new Set(e.included),delete e.included),(null===(r=null==e?void 0:e.excluded)||void 0===r?void 0:r.length)&&e.excluded.length>Lt&&(e.generated_excludedSet=new Set(e.excluded),delete e.excluded),(null===(i=null==e?void 0:e.includedContexts)||void 0===i?void 0:i.length)&&e.includedContexts.forEach((e=>{var t;(null===(t=null==e?void 0:e.values)||void 0===t?void 0:t.length)&&e.values.length>Lt&&(e.generated_valuesSet=new Set(e.values),e.values=[]);})),(null===(n=null==e?void 0:e.excludedContexts)||void 0===n?void 0:n.length)&&e.excludedContexts.forEach((e=>{var t;(null===(t=null==e?void 0:e.values)||void 0===t?void 0:t.length)&&e.values.length>Lt&&(e.generated_valuesSet=new Set(e.values),e.values=[]);})),null===(s=null==e?void 0:e.rules)||void 0===s||s.forEach((e=>{var t;e.bucketBy&&(e.bucketByAttributeReference=new Nt.AttributeReference(e.bucketBy,!e.rolloutContextKind)),null===(t=null==e?void 0:e.clauses)||void 0===t||t.forEach((e=>{e&&e.attribute?e.attributeReference=new Nt.AttributeReference(e.attribute,!e.contextKind):e&&(e.attributeReference=Nt.AttributeReference.invalidReference);}));}));}function qt(e){try{return JSON.parse(e,Vt)}catch(e){return}}$t.reviver=Vt,$t.replacer=zt,$t.processFlag=Ht,$t.processSegment=Kt,$t.deserializeAll=function(e){var t,r;const i=qt(e);if(i)return Object.values((null===(t=null==i?void 0:i.data)||void 0===t?void 0:t.flags)||[]).forEach((e=>{Ht(e);})),Object.values((null===(r=null==i?void 0:i.data)||void 0===r?void 0:r.segments)||[]).forEach((e=>{Kt(e);})),i},$t.deserializePoll=function(e){const t=qt(e);if(t)return Object.values((null==t?void 0:t.flags)||[]).forEach((e=>{Ht(e);})),Object.values((null==t?void 0:t.segments)||[]).forEach((e=>{Kt(e);})),t},$t.deserializePatch=function(e){const t=qt(e);if(t)return t.path.startsWith(Bt.default.Features.streamApiPath)?(Ht(t.data),t.kind=Bt.default.Features):t.path.startsWith(Bt.default.Segments.streamApiPath)&&(Kt(t.data),t.kind=Bt.default.Segments),t},$t.deserializeDelete=function(e){const t=qt(e);if(t)return t.path.startsWith(Bt.default.Features.streamApiPath)?t.kind=Bt.default.Features:t.path.startsWith(Bt.default.Segments.streamApiPath)&&(t.kind=Bt.default.Segments),t},$t.serializeFlag=function(e){return JSON.stringify(e,zt)},$t.deserializeFlag=function(e){const t=qt(e);if(t)return Ht(t),t},$t.serializeSegment=function(e){return JSON.stringify(e,zt)},$t.deserializeSegment=function(e){const t=qt(e);if(t)return Kt(t),t};var Gt={};Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.default=function(e,t,r){let i;return i=e.status?`error ${e.status}${401===e.status?" (invalid SDK key)":""}`:`I/O error (${e.message||e})`,`Received ${i} for ${t} - ${null!=r?r:"giving up permanently"}`},Object.defineProperty(Mt,"__esModule",{value:!0});const Wt=jt,Xt=$t,Jt=Et,Yt=Gt;Mt.default=class{constructor(e,t,r){this.requestor=t,this.featureStore=r,this.stopped=!1,this.logger=e.logger,this.pollInterval=e.pollInterval,this.featureStore=r;}poll(e){var t;if(this.stopped)return;const r=t=>{var r,i;null===(r=this.logger)||void 0===r||r.error("Polling received invalid data"),null===(i=this.logger)||void 0===i||i.debug(`Invalid JSON follows: ${t}`),null==e||e(new Wt.LDPollingError("Malformed JSON data in polling response"));},i=Date.now();null===(t=this.logger)||void 0===t||t.debug("Polling LaunchDarkly for feature flag updates"),this.requestor.requestAllData(((t,n)=>{var s,a,o;const l=Date.now()-i,u=Math.max(1e3*this.pollInterval-l,0);if(null===(s=this.logger)||void 0===s||s.debug("Elapsed: %d ms, sleeping for %d ms",l,u),t){if(t.status&&!(0, Wt.isHttpRecoverable)(t.status)){const r=(0, Yt.default)(t,"polling request");return null===(a=this.logger)||void 0===a||a.error(r),void(null==e||e(new Wt.LDPollingError(r)))}null===(o=this.logger)||void 0===o||o.warn((0, Yt.default)(t,"polling request","will retry"));}else if(n){const t=(0, Xt.deserializePoll)(n);if(t){const r={[Jt.default.Features.namespace]:t.flags,[Jt.default.Segments.namespace]:t.segments};return void this.featureStore.init(r,(()=>{null==e||e(),this.timeoutHandle=e=>{e();};}))}r(n);}this.timeoutHandle=e=>{e();};}));}start(e){this.poll(e);}stop(){this.timeoutHandle&&(clearTimeout(this.timeoutHandle),this.timeoutHandle=void 0),this.stopped=!0;}close(){this.stop();}};var Zt={},Qt={};Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.default=function(e,t,r){const i=r.sdkData(),n={authorization:e,"user-agent":`${i.userAgentBase?i.userAgentBase:"NodeJSClient"}/${i.version}`};i.wrapperName&&(n["x-launchdarkly-wrapper"]=i.wrapperVersion?`${i.wrapperName}/${i.wrapperVersion}`:i.wrapperName);const s=t.tags.value;return s&&(n["x-launchdarkly-tags"]=s),n},Object.defineProperty(Zt,"__esModule",{value:!0});const er=jt,tr=Qt;Zt.default=class{constructor(e,t,r,i){this.requests=i,this.eTagCache={},this.headers=(0, tr.default)(e,t,r),this.uri=`${t.serviceEndpoints.polling}/sdk/latest-all`;}async requestWithETagCache(e,t){const r=this.eTagCache[e],i=null==r?void 0:r.etag,n=i?Object.assign(Object.assign({},t),{headers:Object.assign(Object.assign({},t.headers),{"if-none-match":i})}):t,s=await this.requests.fetch(e,n);if(304===s.status&&r)return {res:s,body:r.body};const a=s.headers.get("etag"),o=await s.text();return a&&(this.eTagCache[e]={etag:a,body:o}),{res:s,body:o}}async requestAllData(e){const t={method:"GET",headers:this.headers};try{const{res:r,body:i}=await this.requestWithETagCache(this.uri,t);if(200!==r.status&&304!==r.status){return e(new er.LDStreamingError(`Unexpected status code: ${r.status}`,r.status),void 0)}return e(void 0,304===r.status?null:i)}catch(t){return e(t,void 0)}}};var rr={};Object.defineProperty(rr,"__esModule",{value:!0});const ir=jt,nr=$t,sr=Et,ar=Qt,or=Gt;function lr(e,t){return t.startsWith(e.streamApiPath)?t.substring(e.streamApiPath.length):void 0}rr.default=class{constructor(e,t,r,i,n,s){this.featureStore=n,this.diagnosticsManager=s,this.headers=(0, ar.default)(e,t,i),this.logger=t.logger,this.streamInitialReconnectDelay=t.streamInitialReconnectDelay,this.requests=r,this.streamUri=`${t.serviceEndpoints.streaming}/all`;}logConnectionStarted(){this.connectionAttemptStartTime=Date.now();}logConnectionResult(e){this.connectionAttemptStartTime&&this.diagnosticsManager&&this.diagnosticsManager.recordStreamInit(this.connectionAttemptStartTime,!e,Date.now()-this.connectionAttemptStartTime),this.connectionAttemptStartTime=void 0;}start(e){this.logConnectionStarted();const t=(t,r)=>{var i,n;null===(i=this.logger)||void 0===i||i.error(`Stream received invalid data in "${t}" message`),null===(n=this.logger)||void 0===n||n.debug(`Invalid JSON follows: ${r}`),null==e||e(new ir.LDStreamingError("Malformed JSON data in event stream"));},r=this.requests.createEventSource(this.streamUri,{headers:this.headers,errorFilter:t=>{var r,i;return t.status&&!(0, ir.isHttpRecoverable)(t.status)?(this.logConnectionResult(!1),null==e||e(new ir.LDStreamingError(t.message,t.status)),null===(r=this.logger)||void 0===r||r.error((0, or.default)(t,"streaming request")),!1):(null===(i=this.logger)||void 0===i||i.warn((0, or.default)(t,"streaming request","will retry")),this.logConnectionResult(!1),this.logConnectionStarted(),!0)},initialRetryDelayMillis:1e3*this.streamInitialReconnectDelay,readTimeoutMillis:3e5,retryResetIntervalMillis:6e4});this.eventSource=r,r.onclose=()=>{var e;null===(e=this.logger)||void 0===e||e.info("Closed LaunchDarkly stream connection");},r.onerror=()=>{},r.onopen=()=>{var e;null===(e=this.logger)||void 0===e||e.info("Opened LaunchDarkly stream connection");},r.onretrying=e=>{var t;null===(t=this.logger)||void 0===t||t.info(`Will retry stream connection in ${e.delayMillis} milliseconds`);},r.addEventListener("put",(r=>{var i;if(null===(i=this.logger)||void 0===i||i.debug("Received put event"),r&&r.data){this.logConnectionResult(!0);const i=(0, nr.deserializeAll)(r.data);if(!i)return void t("put",r.data);const n={[sr.default.Features.namespace]:i.data.flags,[sr.default.Segments.namespace]:i.data.segments};this.featureStore.init(n,(()=>null==e?void 0:e()));}else null==e||e(new ir.LDStreamingError("Unexpected payload from event stream"));})),r.addEventListener("patch",(r=>{var i,n;if(null===(i=this.logger)||void 0===i||i.debug("Received patch event"),r&&r.data){const e=(0, nr.deserializePatch)(r.data);if(!e)return void t("patch",r.data);if(e.kind){const t=lr(e.kind,e.path);t&&(null===(n=this.logger)||void 0===n||n.debug(`Updating ${t} in ${e.kind.namespace}`),this.featureStore.upsert(e.kind,e.data,(()=>{})));}}else null==e||e(new ir.LDStreamingError("Unexpected payload from event stream"));})),r.addEventListener("delete",(r=>{var i,n;if(null===(i=this.logger)||void 0===i||i.debug("Received delete event"),r&&r.data){const e=(0, nr.deserializeDelete)(r.data);if(!e)return void t("delete",r.data);if(e.kind){const t=lr(e.kind,e.path);t&&(null===(n=this.logger)||void 0===n||n.debug(`Deleting ${t} in ${e.kind.namespace}`),this.featureStore.upsert(e.kind,{key:t,version:e.version,deleted:!0},(()=>{})));}}else null==e||e(new ir.LDStreamingError("Unexpected payload from event stream"));}));}stop(){var e;null===(e=this.eventSource)||void 0===e||e.close(),this.eventSource=void 0;}close(){this.stop();}};var ur={};Object.defineProperty(ur,"__esModule",{value:!0}),ur.allAsync=ur.firstSeriesAsync=ur.allSeriesAsync=ur.firstResult=void 0,ur.firstResult=function(e,t){let r;return null==e||e.some(((e,i)=>(r=t(e,i),!!r))),r};const cr=50;function dr(e,t,r,i,n){e?i<(null==e?void 0:e.length)?t(e[i],i,(s=>{if(r){if(!s)return void n(!1)}else if(s)return void n(!0);e.length>cr?Promise.resolve().then((()=>{dr(e,t,r,i+1,n);})):dr(e,t,r,i+1,n);})):n(r):n(!1);}ur.allSeriesAsync=function(e,t,r){dr(e,t,!0,0,r);},ur.firstSeriesAsync=function(e,t,r){dr(e,t,!1,0,r);},ur.allAsync=function(e,t,r){e?Promise.all(null==e?void 0:e.map((e=>new Promise((r=>{t(e,r);}))))).then((e=>{r(e.every((e=>e)));})):r(!1);};var hr,fr={};Object.defineProperty(fr,"__esModule",{value:!0}),function(e){e.MalformedFlag="MALFORMED_FLAG",e.UserNotSpecified="USER_NOT_SPECIFIED",e.FlagNotFound="FLAG_NOT_FOUND",e.ClientNotReady="CLIENT_NOT_READY";}(hr||(hr={})),fr.default=hr;var pr={},vr={};Object.defineProperty(vr,"__esModule",{value:!0});class gr{static prerequisiteFailed(e){return {kind:"PREREQUISITE_FAILED",prerequisiteKey:e}}static ruleMatch(e,t){return {kind:"RULE_MATCH",ruleId:e,ruleIndex:t}}}gr.Fallthrough={kind:"FALLTHROUGH"},gr.Off={kind:"OFF"},gr.TargetMatch={kind:"TARGET_MATCH"},vr.default=gr,Object.defineProperty(pr,"__esModule",{value:!0});const yr=vr;class mr{constructor(e,t,r){this.isError=e,this.detail=t,this.message=r,this.isError=e,this.detail=t,this.message=r;}get isOff(){return this.detail.reason.kind===yr.default.Off.kind}setDefault(e){this.detail.value=e;}static forError(e,t,r){return new mr(!0,{value:null!=r?r:null,variationIndex:null,reason:{kind:"ERROR",errorKind:e}},t)}static forSuccess(e,t,r){return new mr(!1,{value:e,variationIndex:void 0===r?null:r,reason:t})}}pr.default=mr;var br={},_r={};Object.defineProperty(_r,"__esModule",{value:!0});_r.default=class{constructor(e){this.crypto=e;}sha1Hex(e){const t=this.crypto.createHash("sha1");return t.update(e),t.digest("hex")}bucket(e,t,r,i,n="user",s){const a=function(e){return "string"==typeof e?e:Number.isInteger(e)?String(e):null}(e.valueForKind(r,n));if(null===a){return [0,e.kinds.indexOf(n)>=0]}const o=`${s?Number(s):`${t}.${i}`}.${a}`;return [parseInt(this.sha1Hex(o).substring(0,15),16)/0x1000000000000000,!0]}};var Er={},wr={};Object.defineProperty(wr,"__esModule",{value:!0}),wr.getBucketBy=wr.getOffVariation=wr.getVariation=void 0;const Or=o,Sr=fr,xr=pr,kr=new Or.AttributeReference("key");function Pr(e,t,r){return Or.TypeValidators.Number.is(t)&&t>=0&&t<e.variations.length?xr.default.forSuccess(e.variations[t],r,t):xr.default.forError(Sr.default.MalformedFlag,"Invalid variation index in flag")}wr.getVariation=Pr,wr.getOffVariation=function(e,t){return Or.TypeValidators.Number.is(e.offVariation)?Pr(e,e.offVariation,t):xr.default.forSuccess(null,t)},wr.getBucketBy=function(e,t){var r;return null!==(r=e?void 0:t)&&void 0!==r?r:kr},Object.defineProperty(Er,"__esModule",{value:!0});const Ar=o,Ir=ur,Rr=vr,Mr=wr;function jr(e,t,r){const i=r.key(t.contextKind);if(void 0!==i){if(t.values.indexOf(i)>=0)return (0, Mr.getVariation)(e,t.variation,Rr.default.TargetMatch)}}Er.default=function(e,t){var r;return (null===(r=e.contextTargets)||void 0===r?void 0:r.length)?(0, Ir.firstResult)(e.contextTargets,(r=>{if(!r.contextKind||r.contextKind===Ar.Context.userKind){const i=(e.targets||[]).find((e=>e.variation===r.variation));return i?jr(e,i,t):void 0}return jr(e,r,t)})):(0, Ir.firstResult)(e.targets,(r=>jr(e,r,t)))};var Dr={};Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.default=function(e){return `${e.key}.g${e.generation}`};var Tr={},Cr={},Fr={exports:{}};var $r={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};var Nr="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};!function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:n}=$r,s=Nr,a=(t=e.exports={}).re=[],o=t.safeRe=[],l=t.src=[],u=t.t={};let c=0;const d="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",n],[d,i]],f=(e,t,r)=>{const i=(e=>{for(const[t,r]of h)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),n=c++;s(e,n,t),u[e]=n,l[n]=t,a[n]=new RegExp(t,r?"g":void 0),o[n]=new RegExp(i,r?"g":void 0);};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","\\d+"),f("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),f("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),f("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER",`${d}+`),f("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),f("FULL",`^${l[u.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),f("LOOSE",`^${l[u.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),f("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),f("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),f("COERCERTL",l[u.COERCE],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",f("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",f("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$");}(Fr,Fr.exports);var Br=Fr.exports;const Lr=Object.freeze({loose:!0}),Vr=Object.freeze({});var zr=e=>e?"object"!=typeof e?Lr:e:Vr;const Ur=/^[0-9]+$/,Hr=(e,t)=>{const r=Ur.test(e),i=Ur.test(t);return r&&i&&(e=+e,t=+t),e===t?0:r&&!i?-1:i&&!r?1:e<t?-1:1};var Kr={compareIdentifiers:Hr,rcompareIdentifiers:(e,t)=>Hr(t,e)};const qr=Nr,{MAX_LENGTH:Gr,MAX_SAFE_INTEGER:Wr}=$r,{safeRe:Xr,t:Jr}=Br,Yr=zr,{compareIdentifiers:Zr}=Kr;var Qr=class e{constructor(t,r){if(r=Yr(r),t instanceof e){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version;}else if("string"!=typeof t)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Gr)throw new TypeError(`version is longer than ${Gr} characters`);qr("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const i=t.trim().match(r.loose?Xr[Jr.LOOSE]:Xr[Jr.FULL]);if(!i)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>Wr||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Wr||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Wr||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<Wr)return t}return e})):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format();}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(qr("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if("string"==typeof t&&t===this.version)return 0;t=new e(t,this.options);}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),Zr(this.major,t.major)||Zr(this.minor,t.minor)||Zr(this.patch,t.patch)}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return -1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const e=this.prerelease[r],i=t.prerelease[r];if(qr("prerelease compare",r,e,i),void 0===e&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===e)return -1;if(e!==i)return Zr(e,i)}while(++r)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let r=0;do{const e=this.build[r],i=t.build[r];if(qr("prerelease compare",r,e,i),void 0===e&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===e)return -1;if(e!==i)return Zr(e,i)}while(++r)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else {let i=this.prerelease.length;for(;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);if(-1===i){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e);}}if(t){let i=[t,e];!1===r&&(i=[t]),0===Zr(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i;}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};const ei=Qr;var ti=(e,t,r=!1)=>{if(e instanceof ei)return e;try{return new ei(e,t)}catch(e){if(!r)return null;throw e}};const ri=ti;var ii=(e,t)=>{const r=ri(e,t);return r?r.version:null};const ni=ti;var si=(e,t)=>{const r=ni(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};const ai=Qr;var oi=(e,t,r,i,n)=>{"string"==typeof r&&(n=i,i=r,r=void 0);try{return new ai(e instanceof ai?e.version:e,r).inc(t,i,n).version}catch(e){return null}};const li=ti;var ui=(e,t)=>{const r=li(e,null,!0),i=li(t,null,!0),n=r.compare(i);if(0===n)return null;const s=n>0,a=s?r:i,o=s?i:r,l=!!a.prerelease.length;if(!!o.prerelease.length&&!l)return o.patch||o.minor?a.patch?"patch":a.minor?"minor":"major":"major";const u=l?"pre":"";return r.major!==i.major?u+"major":r.minor!==i.minor?u+"minor":r.patch!==i.patch?u+"patch":"prerelease"};const ci=Qr;var di=(e,t)=>new ci(e,t).major;const hi=Qr;var fi=(e,t)=>new hi(e,t).minor;const pi=Qr;var vi=(e,t)=>new pi(e,t).patch;const gi=ti;var yi=(e,t)=>{const r=gi(e,t);return r&&r.prerelease.length?r.prerelease:null};const mi=Qr;var bi=(e,t,r)=>new mi(e,r).compare(new mi(t,r));const _i=bi;var Ei=(e,t,r)=>_i(t,e,r);const wi=bi;var Oi=(e,t)=>wi(e,t,!0);const Si=Qr;var xi=(e,t,r)=>{const i=new Si(e,r),n=new Si(t,r);return i.compare(n)||i.compareBuild(n)};const ki=xi;var Pi=(e,t)=>e.sort(((e,r)=>ki(e,r,t)));const Ai=xi;var Ii=(e,t)=>e.sort(((e,r)=>Ai(r,e,t)));const Ri=bi;var Mi=(e,t,r)=>Ri(e,t,r)>0;const ji=bi;var Di=(e,t,r)=>ji(e,t,r)<0;const Ti=bi;var Ci=(e,t,r)=>0===Ti(e,t,r);const Fi=bi;var $i=(e,t,r)=>0!==Fi(e,t,r);const Ni=bi;var Bi=(e,t,r)=>Ni(e,t,r)>=0;const Li=bi;var Vi=(e,t,r)=>Li(e,t,r)<=0;const zi=Ci,Ui=$i,Hi=Mi,Ki=Bi,qi=Di,Gi=Vi;var Wi=(e,t,r,i)=>{switch(t){case"===":return "object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return "object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return zi(e,r,i);case"!=":return Ui(e,r,i);case">":return Hi(e,r,i);case">=":return Ki(e,r,i);case"<":return qi(e,r,i);case"<=":return Gi(e,r,i);default:throw new TypeError(`Invalid operator: ${t}`)}};const Xi=Qr,Ji=ti,{safeRe:Yi,t:Zi}=Br;var Qi,en,tn,rn,nn,sn,an,on,ln,un,cn=(e,t)=>{if(e instanceof Xi)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let t;for(;(t=Yi[Zi.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&t.index+t[0].length===r.index+r[0].length||(r=t),Yi[Zi.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;Yi[Zi.COERCERTL].lastIndex=-1;}else r=e.match(Yi[Zi.COERCE]);return null===r?null:Ji(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};function dn(){if(rn)return tn;function e(t){var r=this;if(r instanceof e||(r=new e),r.tail=null,r.head=null,r.length=0,t&&"function"==typeof t.forEach)t.forEach((function(e){r.push(e);}));else if(arguments.length>0)for(var i=0,n=arguments.length;i<n;i++)r.push(arguments[i]);return r}function t(e,t,r){var i=t===e.head?new n(r,null,t,e):new n(r,t,t.next,e);return null===i.next&&(e.tail=i),null===i.prev&&(e.head=i),e.length++,i}function r(e,t){e.tail=new n(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++;}function i(e,t){e.head=new n(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++;}function n(e,t,r,i){if(!(this instanceof n))return new n(e,t,r,i);this.list=i,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null;}rn=1,tn=e,e.Node=n,e.create=e,e.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},e.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++;}},e.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++;}},e.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)r(this,arguments[e]);return this.length},e.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)i(this,arguments[e]);return this.length},e.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},e.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},e.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,i=0;null!==r;i++)e.call(t,r.value,i,this),r=r.next;},e.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,i=this.length-1;null!==r;i--)e.call(t,r.value,i,this),r=r.prev;},e.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},e.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},e.prototype.map=function(t,r){r=r||this;for(var i=new e,n=this.head;null!==n;)i.push(t.call(r,n.value,this)),n=n.next;return i},e.prototype.mapReverse=function(t,r){r=r||this;for(var i=new e,n=this.tail;null!==n;)i.push(t.call(r,n.value,this)),n=n.prev;return i},e.prototype.reduce=function(e,t){var r,i=this.head;if(arguments.length>1)r=t;else {if(!this.head)throw new TypeError("Reduce of empty list with no initial value");i=this.head.next,r=this.head.value;}for(var n=0;null!==i;n++)r=e(r,i.value,n),i=i.next;return r},e.prototype.reduceReverse=function(e,t){var r,i=this.tail;if(arguments.length>1)r=t;else {if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");i=this.tail.prev,r=this.tail.value;}for(var n=this.length-1;null!==i;n--)r=e(r,i.value,n),i=i.prev;return r},e.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},e.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},e.prototype.slice=function(t,r){(r=r||this.length)<0&&(r+=this.length),(t=t||0)<0&&(t+=this.length);var i=new e;if(r<t||r<0)return i;t<0&&(t=0),r>this.length&&(r=this.length);for(var n=0,s=this.head;null!==s&&n<t;n++)s=s.next;for(;null!==s&&n<r;n++,s=s.next)i.push(s.value);return i},e.prototype.sliceReverse=function(t,r){(r=r||this.length)<0&&(r+=this.length),(t=t||0)<0&&(t+=this.length);var i=new e;if(r<t||r<0)return i;t<0&&(t=0),r>this.length&&(r=this.length);for(var n=this.length,s=this.tail;null!==s&&n>r;n--)s=s.prev;for(;null!==s&&n>t;n--,s=s.prev)i.push(s.value);return i},e.prototype.splice=function(e,r,...i){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,s=this.head;null!==s&&n<e;n++)s=s.next;var a=[];for(n=0;s&&n<r;n++)a.push(s.value),s=this.removeNode(s);null===s&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(n=0;n<i.length;n++)s=t(this,s,i[n]);return a},e.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var i=r.prev;r.prev=r.next,r.next=i;}return this.head=t,this.tail=e,this};try{(en?Qi:(en=1,Qi=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value;};}))(e);}catch(e){}return tn}function hn(){if(on)return an;on=1;class e{constructor(t,r){if(r=i(r),t instanceof e)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new e(t.raw,r);if(t instanceof n)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!p(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&v(e[0])){this.set=[e];break}}this.format();}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&h)|(this.options.loose&&f))+":"+e,i=r.get(t);if(i)return i;const a=this.options.loose,v=a?o[l.HYPHENRANGELOOSE]:o[l.HYPHENRANGE];e=e.replace(v,P(this.options.includePrerelease)),s("hyphen replace",e),e=e.replace(o[l.COMPARATORTRIM],u),s("comparator trim",e),e=e.replace(o[l.TILDETRIM],c),s("tilde trim",e),e=e.replace(o[l.CARETTRIM],d),s("caret trim",e);let g=e.split(" ").map((e=>y(e,this.options))).join(" ").split(/\s+/).map((e=>k(e,this.options)));a&&(g=g.filter((e=>(s("loose invalid filter",e,this.options),!!e.match(o[l.COMPARATORLOOSE]))))),s("range list",g);const m=new Map,b=g.map((e=>new n(e,this.options)));for(const e of b){if(p(e))return [e];m.set(e.value,e);}m.size>1&&m.has("")&&m.delete("");const _=[...m.values()];return r.set(t,_),_}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some((e=>g(e,r)&&t.set.some((t=>g(t,r)&&e.every((e=>t.every((t=>e.intersects(t,r)))))))))}test(e){if(!e)return !1;if("string"==typeof e)try{e=new a(e,this.options);}catch(e){return !1}for(let t=0;t<this.set.length;t++)if(A(this.set[t],e,this.options))return !0;return !1}}an=e;const t=function(){if(sn)return nn;sn=1;const e=dn(),t=Symbol("max"),r=Symbol("length"),i=Symbol("lengthCalculator"),n=Symbol("allowStale"),s=Symbol("maxAge"),a=Symbol("dispose"),o=Symbol("noDisposeOnSet"),l=Symbol("lruList"),u=Symbol("cache"),c=Symbol("updateAgeOnGet"),d=()=>1,h=(e,t,r)=>{const i=e[u].get(t);if(i){const t=i.value;if(f(e,t)){if(v(e,i),!e[n])return}else r&&(e[c]&&(i.value.now=Date.now()),e[l].unshiftNode(i));return t.value}},f=(e,t)=>{if(!t||!t.maxAge&&!e[s])return !1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[s]&&r>e[s]},p=e=>{if(e[r]>e[t])for(let i=e[l].tail;e[r]>e[t]&&null!==i;){const t=i.prev;v(e,i),i=t;}},v=(e,t)=>{if(t){const i=t.value;e[a]&&e[a](i.key,i.value),e[r]-=i.length,e[u].delete(i.key),e[l].removeNode(t);}};class g{constructor(e,t,r,i,n){this.key=e,this.value=t,this.length=r,this.now=i,this.maxAge=n||0;}}const y=(e,t,r,i)=>{let s=r.value;f(e,s)&&(v(e,r),e[n]||(s=void 0)),s&&t.call(i,s.value,s.key,e);};return nn=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[t]=e.max||1/0;const r=e.length||d;if(this[i]="function"!=typeof r?d:r,this[n]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[s]=e.maxAge||0,this[a]=e.dispose,this[o]=e.noDisposeOnSet||!1,this[c]=e.updateAgeOnGet||!1,this.reset();}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[t]=e||1/0,p(this);}get max(){return this[t]}set allowStale(e){this[n]=!!e;}get allowStale(){return this[n]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[s]=e,p(this);}get maxAge(){return this[s]}set lengthCalculator(e){"function"!=typeof e&&(e=d),e!==this[i]&&(this[i]=e,this[r]=0,this[l].forEach((e=>{e.length=this[i](e.value,e.key),this[r]+=e.length;}))),p(this);}get lengthCalculator(){return this[i]}get length(){return this[r]}get itemCount(){return this[l].length}rforEach(e,t){t=t||this;for(let r=this[l].tail;null!==r;){const i=r.prev;y(this,e,r,t),r=i;}}forEach(e,t){t=t||this;for(let r=this[l].head;null!==r;){const i=r.next;y(this,e,r,t),r=i;}}keys(){return this[l].toArray().map((e=>e.key))}values(){return this[l].toArray().map((e=>e.value))}reset(){this[a]&&this[l]&&this[l].length&&this[l].forEach((e=>this[a](e.key,e.value))),this[u]=new Map,this[l]=new e,this[r]=0;}dump(){return this[l].map((e=>!f(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[l]}set(e,n,c){if((c=c||this[s])&&"number"!=typeof c)throw new TypeError("maxAge must be a number");const d=c?Date.now():0,h=this[i](n,e);if(this[u].has(e)){if(h>this[t])return v(this,this[u].get(e)),!1;const i=this[u].get(e).value;return this[a]&&(this[o]||this[a](e,i.value)),i.now=d,i.maxAge=c,i.value=n,this[r]+=h-i.length,i.length=h,this.get(e),p(this),!0}const f=new g(e,n,h,d,c);return f.length>this[t]?(this[a]&&this[a](e,n),!1):(this[r]+=f.length,this[l].unshift(f),this[u].set(e,this[l].head),p(this),!0)}has(e){if(!this[u].has(e))return !1;const t=this[u].get(e).value;return !f(this,t)}get(e){return h(this,e,!0)}peek(e){return h(this,e,!1)}pop(){const e=this[l].tail;return e?(v(this,e),e.value):null}del(e){v(this,this[u].get(e));}load(e){this.reset();const t=Date.now();for(let r=e.length-1;r>=0;r--){const i=e[r],n=i.e||0;if(0===n)this.set(i.k,i.v);else {const e=n-t;e>0&&this.set(i.k,i.v,e);}}}prune(){this[u].forEach(((e,t)=>h(this,t,!1)));}},nn}(),r=new t({max:1e3}),i=zr,n=fn(),s=Nr,a=Qr,{safeRe:o,t:l,comparatorTrimReplace:u,tildeTrimReplace:c,caretTrimReplace:d}=Br,{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:f}=$r,p=e=>"<0.0.0-0"===e.value,v=e=>""===e.value,g=(e,t)=>{let r=!0;const i=e.slice();let n=i.pop();for(;r&&i.length;)r=i.every((e=>n.intersects(e,t))),n=i.pop();return r},y=(e,t)=>(s("comp",e,t),e=E(e,t),s("caret",e),e=b(e,t),s("tildes",e),e=O(e,t),s("xrange",e),e=x(e,t),s("stars",e),e),m=e=>!e||"x"===e.toLowerCase()||"*"===e,b=(e,t)=>e.trim().split(/\s+/).map((e=>_(e,t))).join(" "),_=(e,t)=>{const r=t.loose?o[l.TILDELOOSE]:o[l.TILDE];return e.replace(r,((t,r,i,n,a)=>{let o;return s("tilde",e,t,r,i,n,a),m(r)?o="":m(i)?o=`>=${r}.0.0 <${+r+1}.0.0-0`:m(n)?o=`>=${r}.${i}.0 <${r}.${+i+1}.0-0`:a?(s("replaceTilde pr",a),o=`>=${r}.${i}.${n}-${a} <${r}.${+i+1}.0-0`):o=`>=${r}.${i}.${n} <${r}.${+i+1}.0-0`,s("tilde return",o),o}))},E=(e,t)=>e.trim().split(/\s+/).map((e=>w(e,t))).join(" "),w=(e,t)=>{s("caret",e,t);const r=t.loose?o[l.CARETLOOSE]:o[l.CARET],i=t.includePrerelease?"-0":"";return e.replace(r,((t,r,n,a,o)=>{let l;return s("caret",e,t,r,n,a,o),m(r)?l="":m(n)?l=`>=${r}.0.0${i} <${+r+1}.0.0-0`:m(a)?l="0"===r?`>=${r}.${n}.0${i} <${r}.${+n+1}.0-0`:`>=${r}.${n}.0${i} <${+r+1}.0.0-0`:o?(s("replaceCaret pr",o),l="0"===r?"0"===n?`>=${r}.${n}.${a}-${o} <${r}.${n}.${+a+1}-0`:`>=${r}.${n}.${a}-${o} <${r}.${+n+1}.0-0`:`>=${r}.${n}.${a}-${o} <${+r+1}.0.0-0`):(s("no pr"),l="0"===r?"0"===n?`>=${r}.${n}.${a}${i} <${r}.${n}.${+a+1}-0`:`>=${r}.${n}.${a}${i} <${r}.${+n+1}.0-0`:`>=${r}.${n}.${a} <${+r+1}.0.0-0`),s("caret return",l),l}))},O=(e,t)=>(s("replaceXRanges",e,t),e.split(/\s+/).map((e=>S(e,t))).join(" ")),S=(e,t)=>{e=e.trim();const r=t.loose?o[l.XRANGELOOSE]:o[l.XRANGE];return e.replace(r,((r,i,n,a,o,l)=>{s("xRange",e,r,i,n,a,o,l);const u=m(n),c=u||m(a),d=c||m(o),h=d;return "="===i&&h&&(i=""),l=t.includePrerelease?"-0":"",u?r=">"===i||"<"===i?"<0.0.0-0":"*":i&&h?(c&&(a=0),o=0,">"===i?(i=">=",c?(n=+n+1,a=0,o=0):(a=+a+1,o=0)):"<="===i&&(i="<",c?n=+n+1:a=+a+1),"<"===i&&(l="-0"),r=`${i+n}.${a}.${o}${l}`):c?r=`>=${n}.0.0${l} <${+n+1}.0.0-0`:d&&(r=`>=${n}.${a}.0${l} <${n}.${+a+1}.0-0`),s("xRange return",r),r}))},x=(e,t)=>(s("replaceStars",e,t),e.trim().replace(o[l.STAR],"")),k=(e,t)=>(s("replaceGTE0",e,t),e.trim().replace(o[t.includePrerelease?l.GTE0PRE:l.GTE0],"")),P=e=>(t,r,i,n,s,a,o,l,u,c,d,h,f)=>`${r=m(i)?"":m(n)?`>=${i}.0.0${e?"-0":""}`:m(s)?`>=${i}.${n}.0${e?"-0":""}`:a?`>=${r}`:`>=${r}${e?"-0":""}`} ${l=m(u)?"":m(c)?`<${+u+1}.0.0-0`:m(d)?`<${u}.${+c+1}.0-0`:h?`<=${u}.${c}.${d}-${h}`:e?`<${u}.${c}.${+d+1}-0`:`<=${l}`}`.trim(),A=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return !1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(s(e[r].semver),e[r].semver!==n.ANY&&e[r].semver.prerelease.length>0){const i=e[r].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return !0}return !1}return !0};return an}function fn(){if(un)return ln;un=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(i,n){if(n=r(n),i instanceof t){if(i.loose===!!n.loose)return i;i=i.value;}i=i.trim().split(/\s+/).join(" "),a("comparator",i,n),this.options=n,this.loose=!!n.loose,this.parse(i),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this);}parse(t){const r=this.options.loose?i[n.COMPARATORLOOSE]:i[n.COMPARATOR],s=t.match(r);if(!s)throw new TypeError(`Invalid comparator: ${t}`);this.operator=void 0!==s[1]?s[1]:"","="===this.operator&&(this.operator=""),s[2]?this.semver=new o(s[2],this.options.loose):this.semver=e;}toString(){return this.value}test(t){if(a("Comparator.test",t,this.options.loose),this.semver===e||t===e)return !0;if("string"==typeof t)try{t=new o(t,this.options);}catch(e){return !1}return s(t,this.operator,this.semver,this.options)}intersects(e,i){if(!(e instanceof t))throw new TypeError("a Comparator is required");return ""===this.operator?""===this.value||new l(e.value,i).test(this.value):""===e.operator?""===e.value||new l(this.value,i).test(e.semver):(!(i=r(i)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!i.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(s(this.semver,"<",e.semver,i)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(s(this.semver,">",e.semver,i)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}ln=t;const r=zr,{safeRe:i,t:n}=Br,s=Wi,a=Nr,o=Qr,l=hn();return ln}const pn=hn();var vn=(e,t,r)=>{try{t=new pn(t,r);}catch(e){return !1}return t.test(e)};const gn=hn();var yn=(e,t)=>new gn(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")));const mn=Qr,bn=hn();var _n=(e,t,r)=>{let i=null,n=null,s=null;try{s=new bn(t,r);}catch(e){return null}return e.forEach((e=>{s.test(e)&&(i&&-1!==n.compare(e)||(i=e,n=new mn(i,r)));})),i};const En=Qr,wn=hn();var On=(e,t,r)=>{let i=null,n=null,s=null;try{s=new wn(t,r);}catch(e){return null}return e.forEach((e=>{s.test(e)&&(i&&1!==n.compare(e)||(i=e,n=new En(i,r)));})),i};const Sn=Qr,xn=hn(),kn=Mi;var Pn=(e,t)=>{e=new xn(e,t);let r=new Sn("0.0.0");if(e.test(r))return r;if(r=new Sn("0.0.0-0"),e.test(r))return r;r=null;for(let t=0;t<e.set.length;++t){const i=e.set[t];let n=null;i.forEach((e=>{const t=new Sn(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!kn(t,n)||(n=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!n||r&&!kn(r,n)||(r=n);}return r&&e.test(r)?r:null};const An=hn();var In=(e,t)=>{try{return new An(e,t).range||"*"}catch(e){return null}};const Rn=Qr,Mn=fn(),{ANY:jn}=Mn,Dn=hn(),Tn=vn,Cn=Mi,Fn=Di,$n=Vi,Nn=Bi;var Bn=(e,t,r,i)=>{let n,s,a,o,l;switch(e=new Rn(e,i),t=new Dn(t,i),r){case">":n=Cn,s=$n,a=Fn,o=">",l=">=";break;case"<":n=Fn,s=Nn,a=Cn,o="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Tn(e,t,i))return !1;for(let r=0;r<t.set.length;++r){const u=t.set[r];let c=null,d=null;if(u.forEach((e=>{e.semver===jn&&(e=new Mn(">=0.0.0")),c=c||e,d=d||e,n(e.semver,c.semver,i)?c=e:a(e.semver,d.semver,i)&&(d=e);})),c.operator===o||c.operator===l)return !1;if((!d.operator||d.operator===o)&&s(e,d.semver))return !1;if(d.operator===l&&a(e,d.semver))return !1}return !0};const Ln=Bn;var Vn=(e,t,r)=>Ln(e,t,">",r);const zn=Bn;var Un=(e,t,r)=>zn(e,t,"<",r);const Hn=hn();var Kn=(e,t,r)=>(e=new Hn(e,r),t=new Hn(t,r),e.intersects(t,r));const qn=vn,Gn=bi;const Wn=hn(),Xn=fn(),{ANY:Jn}=Xn,Yn=vn,Zn=bi,Qn=[new Xn(">=0.0.0-0")],es=[new Xn(">=0.0.0")],ts=(e,t,r)=>{if(e===t)return !0;if(1===e.length&&e[0].semver===Jn){if(1===t.length&&t[0].semver===Jn)return !0;e=r.includePrerelease?Qn:es;}if(1===t.length&&t[0].semver===Jn){if(r.includePrerelease)return !0;t=es;}const i=new Set;let n,s,a,o,l,u,c;for(const t of e)">"===t.operator||">="===t.operator?n=rs(n,t,r):"<"===t.operator||"<="===t.operator?s=is(s,t,r):i.add(t.semver);if(i.size>1)return null;if(n&&s){if(a=Zn(n.semver,s.semver,r),a>0)return null;if(0===a&&(">="!==n.operator||"<="!==s.operator))return null}for(const e of i){if(n&&!Yn(e,String(n),r))return null;if(s&&!Yn(e,String(s),r))return null;for(const i of t)if(!Yn(e,String(i),r))return !1;return !0}let d=!(!s||r.includePrerelease||!s.semver.prerelease.length)&&s.semver,h=!(!n||r.includePrerelease||!n.semver.prerelease.length)&&n.semver;d&&1===d.prerelease.length&&"<"===s.operator&&0===d.prerelease[0]&&(d=!1);for(const e of t){if(c=c||">"===e.operator||">="===e.operator,u=u||"<"===e.operator||"<="===e.operator,n)if(h&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===h.major&&e.semver.minor===h.minor&&e.semver.patch===h.patch&&(h=!1),">"===e.operator||">="===e.operator){if(o=rs(n,e,r),o===e&&o!==n)return !1}else if(">="===n.operator&&!Yn(n.semver,String(e),r))return !1;if(s)if(d&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===d.major&&e.semver.minor===d.minor&&e.semver.patch===d.patch&&(d=!1),"<"===e.operator||"<="===e.operator){if(l=is(s,e,r),l===e&&l!==s)return !1}else if("<="===s.operator&&!Yn(s.semver,String(e),r))return !1;if(!e.operator&&(s||n)&&0!==a)return !1}return !(n&&u&&!s&&0!==a)&&(!(s&&c&&!n&&0!==a)&&(!h&&!d))},rs=(e,t,r)=>{if(!e)return t;const i=Zn(e.semver,t.semver,r);return i>0?e:i<0||">"===t.operator&&">="===e.operator?t:e},is=(e,t,r)=>{if(!e)return t;const i=Zn(e.semver,t.semver,r);return i<0?e:i>0||"<"===t.operator&&"<="===e.operator?t:e};var ns=(e,t,r={})=>{if(e===t)return !0;e=new Wn(e,r),t=new Wn(t,r);let i=!1;e:for(const n of e.set){for(const e of t.set){const t=ts(n,e,r);if(i=i||null!==t,t)continue e}if(i)return !1}return !0};const ss=Br,as=$r,os=Qr,ls=Kr,us=(e,t,r)=>{const i=[];let n=null,s=null;const a=e.sort(((e,t)=>Gn(e,t,r)));for(const e of a){qn(e,t,r)?(s=e,n||(n=e)):(s&&i.push([n,s]),s=null,n=null);}n&&i.push([n,null]);const o=[];for(const[e,t]of i)e===t?o.push(e):t||e!==a[0]?t?e===a[0]?o.push(`<=${t}`):o.push(`${e} - ${t}`):o.push(`>=${e}`):o.push("*");const l=o.join(" || "),u="string"==typeof t.raw?t.raw:String(t);return l.length<u.length?l:t};var cs={parse:ti,valid:ii,clean:si,inc:oi,diff:ui,major:di,minor:fi,patch:vi,prerelease:yi,compare:bi,rcompare:Ei,compareLoose:Oi,compareBuild:xi,sort:Pi,rsort:Ii,gt:Mi,lt:Di,eq:Ci,neq:$i,gte:Bi,lte:Vi,cmp:Wi,coerce:cn,Comparator:fn(),Range:hn(),satisfies:vn,toComparators:yn,maxSatisfying:_n,minSatisfying:On,minVersion:Pn,validRange:In,outside:Bn,gtr:Vn,ltr:Un,intersects:Kn,simplifyRange:us,subset:ns,SemVer:os,re:ss.re,src:ss.src,tokens:ss.t,SEMVER_SPEC_VERSION:as.SEMVER_SPEC_VERSION,RELEASE_TYPES:as.RELEASE_TYPES,compareIdentifiers:ls.compareIdentifiers,rcompareIdentifiers:ls.rcompareIdentifiers};Object.defineProperty(Cr,"__esModule",{value:!0});const ds=cs,hs=o,fs=/^\d+(\.\d+)?(\.\d+)?/;function ps(e){if(hs.TypeValidators.String.is(e)&&!e.startsWith("v")){const t=(0, ds.parse)(e);if(t)return t;const r=fs.exec(e);if(r){let t=r[0];for(let e=1;e<r.length;e+=1)void 0===r[e]&&(t+=".0");return t+=e.substring(r[0].length),(0, ds.parse)(t)}}return null}function vs(e){return (t,r)=>{const i=ps(t),n=ps(r);return !!(i&&n&&e(i,n))}}function gs(e,t,r){return (i,n)=>!(!t.is(i)||!t.is(n))&&(r?e(r(i),r(n)):e(i,n))}function ys(e){return "number"==typeof e?e:Date.parse(e)}const ms={in:(e,t)=>e===t,endsWith:gs(((e,t)=>e.endsWith(t)),hs.TypeValidators.String),startsWith:gs(((e,t)=>e.startsWith(t)),hs.TypeValidators.String),matches:gs(((e,t)=>function(e,t){try{return new RegExp(e).test(t)}catch(e){return !1}}(t,e)),hs.TypeValidators.String),contains:gs(((e,t)=>e.indexOf(t)>-1),hs.TypeValidators.String),lessThan:gs(((e,t)=>e<t),hs.TypeValidators.Number),lessThanOrEqual:gs(((e,t)=>e<=t),hs.TypeValidators.Number),greaterThan:gs(((e,t)=>e>t),hs.TypeValidators.Number),greaterThanOrEqual:gs(((e,t)=>e>=t),hs.TypeValidators.Number),before:gs(((e,t)=>e<t),hs.TypeValidators.Date,ys),after:gs(((e,t)=>e>t),hs.TypeValidators.Date,ys),semVerEqual:vs(((e,t)=>0===e.compare(t))),semVerLessThan:vs(((e,t)=>e.compare(t)<0)),semVerGreaterThan:vs(((e,t)=>e.compare(t)>0))};Cr.default=class{static is(e){return Object.prototype.hasOwnProperty.call(ms,e)}static execute(e,t,r){var i,n;return null!==(n=null===(i=ms[e])||void 0===i?void 0:i.call(ms,t,r))&&void 0!==n&&n}},Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.maybeNegate=void 0;const bs=Cr;function _s(e,t){return e.negate?!t:t}function Es(e,t,r){return r.some((r=>bs.default.execute(e,t,r)))}Tr.maybeNegate=_s,Tr.default=function(e,t){const r=t.valueForKind(e.attributeReference,e.contextKind);return null!=r&&(Array.isArray(r)?_s(e,r.some((t=>Es(e.op,t,e.values)))):_s(e,Es(e.op,r,e.values)))};var ws={};function Os(e,t,r,i){if(t)for(let r=0;r<t.length;r+=1){const i=t[r],n=e.key(i.contextKind);if(n)if(i.generated_valuesSet){if(i.generated_valuesSet.has(n))return !0}else if(i.values.includes(n))return !0}if(i){const t=e.key("user");if(t&&i.has(t))return !0}else if(r){const t=e.key("user");if(t&&r.includes(t))return !0}return !1}Object.defineProperty(ws,"__esModule",{value:!0}),ws.default=function(e,t){if(Os(t,e.includedContexts,e.included,e.generated_includedSet))return !0;const r=Os(t,e.excludedContexts,e.excluded,e.generated_excludedSet);return r?!r:void 0},Object.defineProperty(br,"__esModule",{value:!0});const Ss=_r,xs=ur,ks=fr,Ps=pr,As=Er,Is=Dr,Rs=Tr,Ms=ws,js=vr,Ds=wr,Ts={HEALTHY:1,STALE:2,STORE_ERROR:3,NOT_CONFIGURED:4};function Cs(e){return void 0!==e&&Ts[e]||0}function Fs(e,t){return void 0!==e&&Cs(e)>Cs(t)?e:t}function $s(e){return {error:!1,isMatch:e,result:void 0}}function Ns(e){return {error:!0,isMatch:!1,result:e}}br.default=class{constructor(e,t){this.queries=t,this.bucketer=new Ss.default(e.crypto);}async evaluate(e,t,r){return new Promise((i=>{const n={};this.evaluateInternal(e,t,n,[],(e=>{n.bigSegmentsStatus&&(e.detail.reason=Object.assign(Object.assign({},e.detail.reason),{bigSegmentsStatus:n.bigSegmentsStatus})),e.events=n.events,i(e);}),r);}))}evaluateCb(e,t,r,i){const n={};this.evaluateInternal(e,t,n,[],(e=>{n.bigSegmentsStatus&&(e.detail.reason=Object.assign(Object.assign({},e.detail.reason),{bigSegmentsStatus:n.bigSegmentsStatus})),e.events=n.events,r(e);}),i);}evaluateInternal(e,t,r,i,n,s){e.on?this.checkPrerequisites(e,t,r,i,(i=>{if(i)return void n(i);const s=(0, As.default)(e,t);s?n(s):this.evaluateRules(e,t,r,(r=>{n(r||this.variationForContext(e.fallthrough,t,e,js.default.Fallthrough));}));}),s):n((0, Ds.getOffVariation)(e,js.default.Off));}checkPrerequisites(e,t,r,i,n,s){let a;e.prerequisites&&e.prerequisites.length?(0, xs.allSeriesAsync)(e.prerequisites,((n,o,l)=>{if(-1!==i.indexOf(n.key))return a=Ps.default.forError(ks.default.MalformedFlag,`Prerequisite of ${e.key} causing a circular reference. This is probably a temporary condition due to an incomplete update.`),void l(!0);const u=[...i,n.key];this.queries.getFlag(n.key,(i=>{if(!i)return a=(0, Ds.getOffVariation)(e,js.default.prerequisiteFailed(n.key)),void l(!1);this.evaluateInternal(i,t,r,u,(o=>{var u;return r.events=null!==(u=r.events)&&void 0!==u?u:[],s&&r.events.push(s.evalEvent(i,t,o.detail,null,e)),o.isError?(a=o,l(!1)):o.isOff||o.detail.variationIndex!==n.variation?(a=(0, Ds.getOffVariation)(e,js.default.prerequisiteFailed(n.key)),l(!1)):l(!0)}),s);}));}),(()=>{n(a);})):n(void 0);}evaluateRules(e,t,r,i){let n;(0, xs.firstSeriesAsync)(e.rules,((i,s,a)=>{this.ruleMatchContext(e,i,s,t,r,[],(e=>{n=e,a(!!e);}));}),(()=>i(n)));}clauseMatchContext(e,t,r,i,n){let s;"segmentMatch"!==e.op?e.attributeReference.isValid?n($s((0, Rs.default)(e,t))):n(Ns(Ps.default.forError(ks.default.MalformedFlag,"Invalid attribute reference in clause"))):(0, xs.firstSeriesAsync)(e.values,((e,n,a)=>{this.queries.getSegment(e,(e=>{if(e){if(r.includes(e.key))return s=Ps.default.forError(ks.default.MalformedFlag,`Segment rule referencing segment ${e.key} caused a circular reference. This is probably a temporary condition due to an incomplete update`),void a(!0);const n=[...r,null==e?void 0:e.key];this.segmentMatchContext(e,t,i,n,(e=>{e.error&&(s=e.result),a(e.error||e.isMatch);}));}else a(!1);}));}),(t=>n(s?Ns(s):$s((0, Rs.maybeNegate)(e,t)))));}ruleMatchContext(e,t,r,i,n,s,a){if(!t.clauses)return void a(void 0);let o;(0, xs.allSeriesAsync)(t.clauses,((e,t,r)=>{this.clauseMatchContext(e,i,s,n,(e=>(o=e.result,r(e.error||e.isMatch))));}),(n=>a(o||(n?this.variationForContext(t,i,e,js.default.ruleMatch(t.id,r)):void 0))));}variationForContext(e,t,r,i){if(void 0===e)return Ps.default.forError(ks.default.MalformedFlag,"Fallthrough variation undefined");if(void 0!==e.variation)return (0, Ds.getVariation)(r,e.variation,i);if(e.rollout){const{rollout:n}=e,{variations:s}=n,a="experiment"===n.kind;if(s&&s.length){const e=(0, Ds.getBucketBy)(a,n.bucketByAttributeReference);if(!e.isValid)return Ps.default.forError(ks.default.MalformedFlag,"Invalid attribute reference for bucketBy in rollout");const[o,l]=this.bucketer.bucket(t,r.key,e,r.salt||"",n.contextKind,n.seed),u=Object.assign({},i);let c=0;for(let e=0;e<s.length;e+=1){const t=s[e];if(c+=t.weight/1e5,o<c)return a&&l&&!t.untracked&&(u.inExperiment=!0),(0, Ds.getVariation)(r,t.variation,u)}const d=s[s.length-1];return a&&!d.untracked&&(u.inExperiment=!0),(0, Ds.getVariation)(r,d.variation,u)}}return Ps.default.forError(ks.default.MalformedFlag,"Variation/rollout object with no variation or rollout")}segmentRuleMatchContext(e,t,r,i,n,s){let a;(0, xs.allSeriesAsync)(t.clauses,((e,t,s)=>{this.clauseMatchContext(e,r,n,i,(e=>{a=e.result,s(e.error||e.isMatch);}));}),(i=>{if(a)return s(Ns(a));if(i){if(void 0===t.weight)return s($s(i));const n=(0, Ds.getBucketBy)(!1,t.bucketByAttributeReference);if(!n.isValid)return s(Ns(Ps.default.forError(ks.default.MalformedFlag,"Invalid attribute reference in clause")));const[a]=this.bucketer.bucket(r,e.key,n,e.salt||"",t.rolloutContextKind);return s($s(a<t.weight/1e5))}return s($s(!1))}));}simpleSegmentMatchContext(e,t,r,i,n){if(!e.unbounded){const r=(0, Ms.default)(e,t);if(void 0!==r)return void n($s(r))}let s;(0, xs.firstSeriesAsync)(e.rules,((n,a,o)=>{this.segmentRuleMatchContext(e,n,t,r,i,(e=>(s=e.result,o(e.error||e.isMatch))));}),(e=>n(s?Ns(s):$s(e))));}segmentMatchContext(e,t,r,i,n){if(!e.unbounded)return void this.simpleSegmentMatchContext(e,t,r,i,n);const s=e.unboundedContextKind||"user",a=t.key(s);if(a)return e.generation?void(r.bigSegmentsMembership&&r.bigSegmentsMembership[a]?this.bigSegmentMatchContext(r.bigSegmentsMembership[a],e,t,r).then(n):this.queries.getBigSegmentsMembership(a).then((i=>{if(r.bigSegmentsMembership=r.bigSegmentsMembership||{},i){const[e,t]=i;r.bigSegmentsMembership[a]=e,r.bigSegmentsStatus=Fs(r.bigSegmentsStatus,t);}else r.bigSegmentsStatus=Fs(r.bigSegmentsStatus,"NOT_CONFIGURED");this.bigSegmentMatchContext(r.bigSegmentsMembership[a],e,t,r).then(n);}))):(r.bigSegmentsStatus=Fs(r.bigSegmentsStatus,"NOT_CONFIGURED"),void n($s(!1)));n($s(!1));}bigSegmentMatchContext(e,t,r,i){const n=(0, Is.default)(t),s=null==e?void 0:e[n];return new Promise((e=>{null==s?this.simpleSegmentMatchContext(t,r,i,[],e):e($s(s));}))}};var Bs={};Object.defineProperty(Bs,"__esModule",{value:!0});const Ls=pt;Bs.default=class{constructor(e){this.contextKeysCache=new Ls.default({max:e.contextKeysCapacity}),this.flushInterval=e.contextKeysFlushInterval;}processContext(e){const{canonicalKey:t}=e,r=this.contextKeysCache.get(t);return this.contextKeysCache.set(t,!0),!r}flush(){this.contextKeysCache.clear();}};var Vs={},zs={},Us={};Object.defineProperty(Us,"__esModule",{value:!0});Us.default=class{constructor(){this.allData={},this.initCalled=!1;}addItem(e,t,r){let i=this.allData[e.namespace];if(i||(i={},this.allData[e.namespace]=i),Object.hasOwnProperty.call(i,t)){const e=i[t];(!e||e.version<r.version)&&(i[t]=r);}else i[t]=r;}get(e,t,r){const i=this.allData[e.namespace];if(i&&Object.prototype.hasOwnProperty.call(i,t)){const e=i[t];if(e&&!e.deleted)return null==r?void 0:r(e)}return null==r?void 0:r(null)}all(e,t){var r;const i={},n=null!==(r=this.allData[e.namespace])&&void 0!==r?r:{};Object.entries(n).forEach((([e,t])=>{t&&!t.deleted&&(i[e]=t);})),null==t||t(i);}init(e,t){this.initCalled=!0,this.allData=e,null==t||t();}delete(e,t,r,i){const n={version:r,deleted:!0};this.addItem(e,t,n),null==i||i();}upsert(e,t,r){this.addItem(e,t.key,t),null==r||r();}initialized(e){return null==e?void 0:e(this.initCalled)}close(){}getDescription(){return "memory"}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultValues=void 0;const t=o,r=Us,i={baseUri:t.TypeValidators.String,streamUri:t.TypeValidators.String,eventsUri:t.TypeValidators.String,timeout:t.TypeValidators.Number,capacity:t.TypeValidators.Number,logger:t.TypeValidators.Object,featureStore:t.TypeValidators.ObjectOrFactory,bigSegments:t.TypeValidators.Object,updateProcessor:t.TypeValidators.ObjectOrFactory,flushInterval:t.TypeValidators.Number,pollInterval:t.TypeValidators.numberWithMin(30),proxyOptions:t.TypeValidators.Object,offline:t.TypeValidators.Boolean,stream:t.TypeValidators.Boolean,streamInitialReconnectDelay:t.TypeValidators.Number,useLdd:t.TypeValidators.Boolean,sendEvents:t.TypeValidators.Boolean,allAttributesPrivate:t.TypeValidators.Boolean,privateAttributes:t.TypeValidators.StringArray,contextKeysCapacity:t.TypeValidators.Number,contextKeysFlushInterval:t.TypeValidators.Number,tlsParams:t.TypeValidators.Object,diagnosticOptOut:t.TypeValidators.Boolean,diagnosticRecordingInterval:t.TypeValidators.numberWithMin(60),wrapperName:t.TypeValidators.String,wrapperVersion:t.TypeValidators.String,application:t.TypeValidators.Object};e.defaultValues={baseUri:"https://sdk.launchdarkly.com",streamUri:"https://stream.launchdarkly.com",eventsUri:"https://events.launchdarkly.com",stream:!0,streamInitialReconnectDelay:1,sendEvents:!0,timeout:5,capacity:1e4,flushInterval:5,pollInterval:30,offline:!1,useLdd:!1,allAttributesPrivate:!1,privateAttributes:[],contextKeysCapacity:1e3,contextKeysFlushInterval:300,diagnosticOptOut:!1,diagnosticRecordingInterval:900,featureStore:()=>new r.default};e.default=class{constructor(r={}){r=r||{},this.logger=r.logger;const{errors:n,validatedOptions:s}=function(r){const n=[],s=Object.assign({},e.defaultValues);return Object.keys(r).forEach((a=>{var o;const l=r[a],u=i[a];if(u)if(u.is(l))s[a]=l;else if("boolean"===u.getType())n.push(t.OptionMessages.wrongOptionTypeBoolean(a,typeof l)),s[a]=!!l;else if(u instanceof t.NumberWithMinimum&&t.TypeValidators.Number.is(l)){const{min:e}=u;n.push(t.OptionMessages.optionBelowMinimum(a,l,e)),s[a]=e;}else n.push(t.OptionMessages.wrongOptionType(a,u.getType(),typeof l)),s[a]=e.defaultValues[a];else null===(o=r.logger)||void 0===o||o.warn(t.OptionMessages.unknownOption(a));})),{errors:n,validatedOptions:s}}(r);n.forEach((e=>{var t;null===(t=this.logger)||void 0===t||t.warn(e);})),function(e,r){var i,n,s;const{baseUri:a,streamUri:o,eventsUri:l}=e,u=null!=o,c=null!=a,d=null!=l;u===c&&u===d||(!u&&r.stream&&(null===(i=r.logger)||void 0===i||i.warn(t.OptionMessages.partialEndpoint("streamUri"))),c||null===(n=r.logger)||void 0===n||n.warn(t.OptionMessages.partialEndpoint("baseUri")),!d&&r.sendEvents&&(null===(s=r.logger)||void 0===s||s.warn(t.OptionMessages.partialEndpoint("eventsUri"))));}(r,s),this.serviceEndpoints=new t.ServiceEndpoints(s.streamUri,s.baseUri,s.eventsUri),this.eventsCapacity=s.capacity,this.timeout=s.timeout,this.bigSegments=s.bigSegments,this.flushInterval=s.flushInterval,this.pollInterval=s.pollInterval,this.proxyOptions=s.proxyOptions,this.offline=s.offline,this.stream=s.stream,this.streamInitialReconnectDelay=s.streamInitialReconnectDelay,this.useLdd=s.useLdd,this.sendEvents=s.sendEvents,this.allAttributesPrivate=s.allAttributesPrivate,this.privateAttributes=s.privateAttributes,this.contextKeysCapacity=s.contextKeysCapacity,this.contextKeysFlushInterval=s.contextKeysFlushInterval,this.tlsParams=s.tlsParams,this.diagnosticOptOut=s.diagnosticOptOut,this.wrapperName=s.wrapperName,this.wrapperVersion=s.wrapperVersion,this.tags=new t.ApplicationTags(s),this.diagnosticRecordingInterval=s.diagnosticRecordingInterval,t.TypeValidators.Function.is(s.updateProcessor)?this.updateProcessorFactory=s.updateProcessor:this.updateProcessorFactory=()=>s.updateProcessor,t.TypeValidators.Function.is(s.featureStore)?this.featureStoreFactory=s.featureStore:this.featureStoreFactory=()=>s.featureStore;}};}(zs),Object.defineProperty(Vs,"__esModule",{value:!0});const Hs=zs;function Ks(e){return Math.trunc(1e3*e)}Vs.default=class{constructor(e,t,r,i){this.config=t,this.platform=r,this.featureStore=i,this.streamInits=[],this.startTime=Date.now(),this.dataSinceDate=this.startTime,this.id={diagnosticId:r.crypto.randomUUID(),sdkKeySuffix:e.length>6?e.substring(e.length-6):e};}createInitEvent(){var e,t,r,i,n,s,a,o,l,u;const c=this.platform.info.sdkData(),d=this.platform.info.platformData();return {kind:"diagnostic-init",id:this.id,creationDate:this.startTime,sdk:c,configuration:{customBaseURI:this.config.serviceEndpoints.polling!==Hs.defaultValues.baseUri,customStreamURI:this.config.serviceEndpoints.streaming!==Hs.defaultValues.streamUri,customEventsURI:this.config.serviceEndpoints.events!==Hs.defaultValues.eventsUri,eventsCapacity:this.config.eventsCapacity,connectTimeoutMillis:Ks(this.config.timeout),socketTimeoutMillis:Ks(this.config.timeout),eventsFlushIntervalMillis:Ks(this.config.flushInterval),pollingIntervalMillis:Ks(this.config.pollInterval),reconnectTimeMillis:Ks(this.config.streamInitialReconnectDelay),streamingDisabled:!this.config.stream,usingRelayDaemon:this.config.useLdd,offline:this.config.offline,allAttributesPrivate:this.config.allAttributesPrivate,contextKeysCapacity:this.config.contextKeysCapacity,contextKeysFlushIntervalMillis:Ks(this.config.contextKeysFlushInterval),usingProxy:!!(null===(t=(e=this.platform.requests).usingProxy)||void 0===t?void 0:t.call(e)),usingProxyAuthenticator:!!(null===(i=(r=this.platform.requests).usingProxyAuth)||void 0===i?void 0:i.call(r)),diagnosticRecordingIntervalMillis:Ks(this.config.diagnosticRecordingInterval),dataStoreType:null!==(a=null===(s=(n=this.featureStore).getDescription)||void 0===s?void 0:s.call(n))&&void 0!==a?a:"memory"},platform:Object.assign({name:d.name,osArch:null===(o=d.os)||void 0===o?void 0:o.arch,osName:null===(l=d.os)||void 0===l?void 0:l.name,osVersion:null===(u=d.os)||void 0===u?void 0:u.version},d.additional||{})}}recordStreamInit(e,t,r){const i={timestamp:e,failed:t,durationMillis:r};this.streamInits.push(i);}createStatsEventAndReset(e,t,r){const i=Date.now(),n={kind:"diagnostic",id:this.id,creationDate:i,dataSinceDate:this.dataSinceDate,droppedEvents:e,deduplicatedUsers:t,eventsInLastBatch:r,streamInits:this.streamInits};return this.streamInits=[],this.dataSinceDate=i,n}};var qs={},Gs={};Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.default=function(e,t){if(t){if(t.inExperiment)return !0;switch(t.kind){case"RULE_MATCH":{const r=t.ruleIndex;if(void 0!==r){const t=e.rules||[];return r>=0&&r<t.length&&!!t[r].trackEvents}break}case"FALLTHROUGH":return !!e.trackEventsFallthrough}}return !1},Object.defineProperty(qs,"__esModule",{value:!0});const Ws=o,Xs=Gs;qs.default=class{constructor(e){this.withReasons=e;}evalEvent(e,t,r,i,n){var s;const a=(0, Xs.default)(e,r.reason);return new Ws.internal.InputEvalEvent(this.withReasons,t,e.key,i,r,e.version,null!==(s=r.variationIndex)&&void 0!==s?s:void 0,e.trackEvents||a,null==n?void 0:n.key,this.withReasons||a?r.reason:void 0,e.debugEventsUntilDate)}unknownFlagEvent(e,t,r){return new Ws.internal.InputEvalEvent(this.withReasons,t,e,r.value,r)}identifyEvent(e){return new Ws.internal.InputIdentifyEvent(e)}customEvent(e,t,r,i){return new Ws.internal.InputCustomEvent(t,e,null!=r?r:void 0,null!=i?i:void 0)}};var Js={};Object.defineProperty(Js,"__esModule",{value:!0});const Ys=o,Zs=Qt,Qs=Gt,ea=jt;Js.default=class{constructor(e,t){this.defaultHeaders=Object.assign({},(0, Zs.default)(t.basicConfiguration.sdkKey,e,t.platform.info)),this.eventsUri=`${t.basicConfiguration.serviceEndpoints.events}/bulk`,this.diagnosticEventsUri=`${t.basicConfiguration.serviceEndpoints.events}/diagnostic`,this.requests=t.platform.requests,this.crypto=t.platform.crypto;}async tryPostingEvents(e,t,r,i){const n={status:Ys.subsystem.LDDeliveryStatus.Succeeded},s=Object.assign(Object.assign({},this.defaultHeaders),{"content-type":"application/json"});let a;r&&(s["x-launchdarkly-payload-id"]=r,s["x-launchDarkly-event-schema"]="4");try{const r=await this.requests.fetch(t,{headers:s,body:JSON.stringify(e),method:"POST"}),i=Date.parse(r.headers.get("date")||"");if(i&&(n.serverTime=i),r.status<=204)return n;if(a=new ea.LDUnexpectedResponseError((0,Qs.default)({status:r.status,message:"some events were dropped"},"event posting")),!(0,ea.isHttpRecoverable)(r.status))return n.status=Ys.subsystem.LDDeliveryStatus.FailedAndMustShutDown,n.error=a,n}catch(e){a=e;}return a&&!i?(n.status=Ys.subsystem.LDDeliveryStatus.Failed,n.error=a,n):(await new Promise((e=>{})),this.tryPostingEvents(e,this.eventsUri,r,!1))}async sendEventData(e,t){const r=e===Ys.subsystem.LDEventType.AnalyticsEvents?this.crypto.randomUUID():void 0,i=e===Ys.subsystem.LDEventType.AnalyticsEvents?this.eventsUri:this.diagnosticEventsUri;return this.tryPostingEvents(t,i,r,!0)}};var ta={};Object.defineProperty(ta,"__esModule",{value:!0});ta.default=class{close(){}async flush(){}sendEvent(e){}};var ra={};Object.defineProperty(ra,"__esModule",{value:!0});ra.default=class{constructor(e,t){this.valid=e,this.withReasons=t,this.flagValues={},this.flagMetadata={};}addFlag(e,t,r,i,n,s,a){this.flagValues[e.key]=t;const o={};void 0!==r&&(o.variation=r);const l=a&&!n&&!s&&void 0===e.debugEventsUntilDate;l||(o.version=e.version),i&&(s||this.withReasons&&!l)&&(o.reason=i),n&&(o.trackEvents=!0),s&&(o.trackReason=!0),void 0!==e.debugEventsUntilDate&&(o.debugEventsUntilDate=e.debugEventsUntilDate),this.flagMetadata[e.key]=o;}build(){const e=this;return {valid:e.valid,allValues:()=>e.flagValues,getFlagValue:t=>e.flagValues[t],getFlagReason:t=>{var r;return null!==(r=e.flagMetadata[t]?e.flagMetadata[t].reason:null)&&void 0!==r?r:null},toJSON:()=>Object.assign(Object.assign({},e.flagValues),{$flagsState:e.flagMetadata,$valid:e.valid})}}};var ia={},na={},sa={};Object.defineProperty(sa,"__esModule",{value:!0}),sa.default=function(e){return new Promise((t=>{e((e=>{t(e);}));}))},Object.defineProperty(na,"__esModule",{value:!0});const aa=sa;na.default=class{constructor(e){this.store=e;}async get(e,t){return (0, aa.default)((r=>{this.store.get(e,t,r);}))}async all(e){return (0, aa.default)((t=>{this.store.all(e,t);}))}async init(e){return (0, aa.default)((t=>{this.store.init(e,t);}))}async delete(e,t,r){return (0, aa.default)((i=>{this.store.delete(e,t,r,i);}))}async upsert(e,t){return (0, aa.default)((r=>{this.store.upsert(e,t,r);}))}async initialized(){return (0, aa.default)((e=>{this.store.initialized(e);}))}close(){this.store.close();}};var oa={},la={};function ua(e){return Date.now()>e.expiration}Object.defineProperty(la,"__esModule",{value:!0});la.default=class{constructor(e){this.options=e,this.storage=new Map,this.checkIntervalHandle=void e.checkInterval;}get(e){const t=this.storage.get(e);if(!t||!ua(t))return null==t?void 0:t.value;this.storage.delete(e);}set(e,t){this.storage.set(e,{value:t,expiration:Date.now()+1e3*this.options.ttl});}delete(e){this.storage.delete(e);}clear(){this.storage.clear();}close(){this.clear(),this.checkIntervalHandle&&(clearInterval(this.checkIntervalHandle),this.checkIntervalHandle=null);}purgeStale(){this.storage.forEach(((e,t)=>{ua(e)&&this.storage.delete(t);}));}get size(){return this.storage.size}};var ca={};Object.defineProperty(ca,"__esModule",{value:!0}),ca.persistentStoreKinds=void 0;const da=$t,ha=Et;ca.persistentStoreKinds={segments:{namespace:ha.default.Segments.namespace,deserialize:e=>{const t=(0, da.deserializeSegment)(e);if(t)return {version:t.version,item:t}},serialize:e=>{const t=(0, da.serializeSegment)(e);return {version:e.version,deleted:e.deleted,serializedItem:t}},priority:0},features:{namespace:ha.default.Features.namespace,deserialize:e=>{const t=(0, da.deserializeFlag)(e);if(t)return {version:t.version,item:t}},serialize:e=>{const t=(0, da.serializeFlag)(e);return {version:e.version,deleted:e.deleted,serializedItem:t}},priority:1}};var fa={};Object.defineProperty(fa,"__esModule",{value:!0});const pa=ca;function va(e,t){const r=[],i=new Set(Object.keys(t)),n=s=>{if(!i.has(s))return;i.delete(s);const a=t[s];var o;"features"===e.namespace&&(o=a,o.prerequisites&&o.prerequisites.length?o.prerequisites.map((e=>e.key)):[]).forEach((e=>{n(e);})),r.push({key:s,item:e.serialize(a)});};for(;i.size>0;){const e=i.values().next().value;n(e);}return r}fa.default=function(e){const t=[];return Object.keys(e).forEach((r=>{const i=pa.persistentStoreKinds[r];t.push({key:i,item:va(i,e[r])});})),t.sort(((e,t)=>e.key.priority-t.key.priority)),t};var ga={};Object.defineProperty(ga,"__esModule",{value:!0});ga.default=class{constructor(){this.queue=[];}enqueue(e,t){this.queue.push([e,t]),1===this.queue.length&&this.executePendingUpdates();}executePendingUpdates(){if(this.queue.length>0){const[e,t]=this.queue[0];e((()=>{this.queue.shift(),this.queue.length,null==t||t();}));}}},Object.defineProperty(oa,"__esModule",{value:!0});const ya=la,ma=ca,ba=fa,_a=ga;function Ea(e,t){return `${e.namespace}:${t}`}function wa(e){return `$all:${e.namespace}`}const Oa="$checkedInit";function Sa(e){return !e||e.item.deleted?null:e.item}function xa(e){return {version:e,item:{version:e,deleted:!0}}}function ka(e,t){if(t.deleted||!t.serializedItem)return xa(t.version);const r=e.deserialize(t.serializedItem);return void 0===r?xa(t.version):0===r.version||r.version===t.version||void 0===r.item?r:{version:t.version,item:r.item}}oa.default=class{constructor(e,t){this.core=e,this.isInitialized=!1,this.queue=new _a.default,t&&(this.itemCache=new ya.default({ttl:t,checkInterval:600}),this.allItemsCache=new ya.default({ttl:t,checkInterval:600}));}init(e,t){this.queue.enqueue((t=>{this.core.init((0, ba.default)(e),(()=>{this.isInitialized=!0,this.itemCache&&(this.itemCache.clear(),this.allItemsCache.clear(),Object.keys(e).forEach((t=>{const r=ma.persistentStoreKinds[t],i=e[t];this.allItemsCache.set(wa(r),i),Object.keys(i).forEach((e=>{const t=i[e],n={version:t.version,item:t};this.itemCache.set(Ea(r,e),n);}));}))),t();}));}),t);}get(e,t,r){if(this.itemCache){const i=this.itemCache.get(Ea(e,t));if(i)return void r(Sa(i))}const i=ma.persistentStoreKinds[e.namespace];this.core.get(i,t,(n=>{var s;if(n&&n.serializedItem){const a=ka(i,n);return null===(s=this.itemCache)||void 0===s||s.set(Ea(e,t),a),void r(Sa(a))}r(null);}));}initialized(e){var t;this.isInitialized?e(!0):(null===(t=this.itemCache)||void 0===t?void 0:t.get(Oa))?e(!1):this.core.initialized((t=>{var r;this.isInitialized=t,this.isInitialized||null===(r=this.itemCache)||void 0===r||r.set(Oa,!0),e(this.isInitialized);}));}all(e,t){var r;const i=null===(r=this.allItemsCache)||void 0===r?void 0:r.get(wa(e));if(i)return void t(i);const n=ma.persistentStoreKinds[e.namespace];this.core.getAll(n,(r=>{var i;if(!r)return void t({});const s={};r.forEach((({key:e,item:t})=>{const r=Sa(ka(n,t));r&&(s[e]=r);})),null===(i=this.allItemsCache)||void 0===i||i.set(wa(e),s),t(s);}));}upsert(e,t,r){this.queue.enqueue((r=>{this.allItemsCache&&this.allItemsCache.clear();const i=ma.persistentStoreKinds[e.namespace];this.core.upsert(i,t.key,i.serialize(t),((n,s)=>{var a,o;if(!n&&s)if(s.serializedItem){const r=ka(i,s);null===(a=this.itemCache)||void 0===a||a.set(Ea(e,t.key),r);}else s.deleted&&(null===(o=this.itemCache)||void 0===o||o.set(t.key,{key:t.key,version:s.version,deleted:!0}));r();}));}),r);}delete(e,t,r,i){this.upsert(e,{key:t,version:r,deleted:!0},i);}close(){var e,t;null===(e=this.itemCache)||void 0===e||e.close(),null===(t=this.allItemsCache)||void 0===t||t.close(),this.core.close();}getDescription(){return this.core.getDescription()}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.deserializePoll=e.PersistentDataStoreWrapper=e.AsyncStoreFacade=void 0;const t=na;e.AsyncStoreFacade=t.default;const r=oa;e.PersistentDataStoreWrapper=r.default;const i=$t;Object.defineProperty(e,"deserializePoll",{enumerable:!0,get:function(){return i.deserializePoll}});}(ia),Object.defineProperty(a,"__esModule",{value:!0});const Pa=o,Aa=ft,Ia=mt,Ra=_t,Ma=Rt,ja=Mt,Da=Zt,Ta=rr,Ca=jt,Fa=ur,$a=fr,Na=pr,Ba=br,La=Bs,Va=Vs,za=qs,Ua=Js,Ha=Gs,Ka=ta,qa=ra,Ga=zs,Wa=ia,Xa=Et;var Ja;!function(e){e[e.Initializing=0]="Initializing",e[e.Initialized=1]="Initialized",e[e.Failed=2]="Failed";}(Ja||(Ja={}));a.default=class{constructor(e,t,r,i){var n,s,a,o,l;this.sdkKey=e,this.platform=t,this.initState=Ja.Initializing,this.eventFactoryDefault=new za.default(!1),this.eventFactoryWithReasons=new za.default(!0),this.onError=i.onError,this.onFailed=i.onFailed,this.onReady=i.onReady;const{onUpdate:u,hasEventListeners:c}=i,d=new Ga.default(r);if(!e&&!d.offline)throw new Error("You must configure the client with an SDK key");this.config=d,this.logger=d.logger;const h=new Pa.ClientContext(e,d,t),f=d.featureStoreFactory(h);this.asyncFeatureStore=new Wa.AsyncStoreFacade(f);const p=new Ra.default(f,c,u);!d.sendEvents||d.offline||d.diagnosticOptOut||(this.diagnosticsManager=new Va.default(e,d,t,f));const v=()=>d.stream?new Ta.default(e,d,this.platform.requests,this.platform.info,p,this.diagnosticsManager):new ja.default(d,new Da.default(e,d,this.platform.info,this.platform.requests),p);d.offline||d.useLdd?this.updateProcessor=new Ma.default:this.updateProcessor=null!==(s=null===(n=d.updateProcessorFactory)||void 0===n?void 0:n.call(d,h,p))&&void 0!==s?s:v(),!d.sendEvents||d.offline?this.eventProcessor=new Ka.default:this.eventProcessor=new Pa.internal.EventProcessor(d,h,new Ua.default(d,h),new La.default(d),this.diagnosticsManager),this.featureStore=f;const g=new Aa.default(null===(o=null===(a=d.bigSegments)||void 0===a?void 0:a.store)||void 0===o?void 0:o.call(a,h),null!==(l=d.bigSegments)&&void 0!==l?l:{},d.logger,this.platform.crypto);this.bigSegmentsManager=g,this.bigSegmentStatusProviderInternal=g.statusProvider;const y={getFlag(e,t){f.get(Xa.default.Features,e,(e=>t(e)));},getSegment(e,t){f.get(Xa.default.Segments,e,(e=>t(e)));},getBigSegmentsMembership:e=>g.getUserMembership(e)};this.evaluator=new Ba.default(this.platform,y),this.updateProcessor.start((e=>{var t,r;if(e){let r;r=e.status&&401===e.status||e.code&&401===e.code?new Error("Authentication failed. Double check your SDK key."):e,this.onError(r),this.onFailed(r),this.initialized()||(this.initState=Ja.Failed,null===(t=this.initReject)||void 0===t||t.call(this,r));}else this.initialized()||(this.initState=Ja.Initialized,null===(r=this.initResolve)||void 0===r||r.call(this,this),this.onReady());}));}initialized(){return this.initState===Ja.Initialized}waitForInitialization(){return this.initState===Ja.Initialized?Promise.resolve(this):(this.initializedPromise||(this.initializedPromise=new Promise(((e,t)=>{this.initResolve=e,this.initReject=t;}))),this.initializedPromise)}variation(e,t,r,i){return new Promise((n=>{this.evaluateIfPossible(e,t,r,this.eventFactoryDefault,(e=>{n(e.detail.value),null==i||i(null,e.detail.value);}));}))}variationDetail(e,t,r,i){return new Promise((n=>{this.evaluateIfPossible(e,t,r,this.eventFactoryWithReasons,(e=>{n(e.detail),null==i||i(null,e.detail);}));}))}allFlagsState(e,t,r){var i,n,s;if(this.config.offline){null===(i=this.logger)||void 0===i||i.info("allFlagsState() called in offline mode. Returning empty state.");const e=new qa.default(!1,!1).build();return null==r||r(null,e),Promise.resolve(e)}const a=Pa.Context.fromLDContext(e);return a.valid?new Promise((e=>{const i=i=>this.featureStore.all(Xa.default.Features,(n=>{const s=new qa.default(i,!!(null==t?void 0:t.withReasons)),o=!!(null==t?void 0:t.clientSideOnly),l=!!(null==t?void 0:t.detailsOnlyForTrackedFlags);(0, Fa.allAsync)(Object.values(n),((e,t)=>{var r;const i=e;!o||(null===(r=i.clientSideAvailability)||void 0===r?void 0:r.usingEnvironmentId)?this.evaluator.evaluateCb(i,a,(e=>{var r;e.isError&&this.onError(new Error(`Error for feature flag "${i.key}" while evaluating all flags: ${e.message}`));const n=(0, Ha.default)(i,e.detail.reason);s.addFlag(i,e.detail.value,null!==(r=e.detail.variationIndex)&&void 0!==r?r:void 0,e.detail.reason,i.trackEvents||n,n,l),t(!0);})):t(!0);}),(()=>{const t=s.build();null==r||r(null,t),e(t);}));}));this.initialized()?i(!0):this.featureStore.initialized((e=>{var t,r;let n=!0;e?null===(t=this.logger)||void 0===t||t.warn("Called allFlagsState before client initialization; using last known values from data store"):(null===(r=this.logger)||void 0===r||r.warn("Called allFlagsState before client initialization. Data store not available; returning empty state"),n=!1),i(n);}));})):(null===(n=this.logger)||void 0===n||n.info(`${null!==(s=a.message)&&void 0!==s?s:"Invalid context."}. Returning empty state.`),Promise.resolve(new qa.default(!1,!1).build()))}secureModeHash(e){const t=Pa.Context.fromLDContext(e),r=t.valid?t.canonicalKey:void 0,i=this.platform.crypto.createHmac("sha256",this.sdkKey);if(void 0===r)throw new Ca.LDClientError("Could not generate secure mode hash for invalid context");return i.update(r),i.digest("hex")}close(){this.eventProcessor.close(),this.updateProcessor.close(),this.featureStore.close(),this.bigSegmentsManager.close();}isOffline(){return this.config.offline}track(e,t,r,i){var n;const s=Pa.Context.fromLDContext(t);s.valid?this.eventProcessor.sendEvent(this.eventFactoryDefault.customEvent(e,s,r,i)):null===(n=this.logger)||void 0===n||n.warn(Ia.default.missingContextKeyNoEvent);}identify(e){var t;const r=Pa.Context.fromLDContext(e);r.valid?this.eventProcessor.sendEvent(this.eventFactoryDefault.identifyEvent(r)):null===(t=this.logger)||void 0===t||t.warn(Ia.default.missingContextKeyNoEvent);}async flush(e){try{await this.eventProcessor.flush();}catch(t){null==e||e(t,!1);}null==e||e(null,!0);}variationInternal(e,t,r,i,n){var s,a;if(this.config.offline)return null===(s=this.logger)||void 0===s||s.info("Variation called in offline mode. Returning default value."),void n(Na.default.forError($a.default.ClientNotReady,void 0,r));const o=Pa.Context.fromLDContext(t);if(!o.valid)return this.onError(new Ca.LDClientError(`${null!==(a=o.message)&&void 0!==a?a:"Context not valid;"} returning default value.`)),void n(Na.default.forError($a.default.UserNotSpecified,void 0,r));this.featureStore.get(Xa.default.Features,e,(t=>{const s=t;if(!s){const t=new Ca.LDClientError(`Unknown feature flag "${e}"; returning default value`);this.onError(t);const i=Na.default.forError($a.default.FlagNotFound,void 0,r);return this.eventProcessor.sendEvent(this.eventFactoryDefault.unknownFlagEvent(e,o,i.detail)),void n(i)}this.evaluator.evaluateCb(s,o,(e=>{var t,a;void 0!==e.detail.variationIndex&&null!==e.detail.variationIndex||(null===(t=this.logger)||void 0===t||t.debug("Result value is null in variation"),e.setDefault(r)),null===(a=e.events)||void 0===a||a.forEach((e=>{this.eventProcessor.sendEvent(e);})),this.eventProcessor.sendEvent(i.evalEvent(s,o,e.detail,r)),n(e);}),i);}));}evaluateIfPossible(e,t,r,i,n){this.initialized()?this.variationInternal(e,t,r,i,n):this.featureStore.initialized((s=>{var a,o;if(s)return null===(a=this.logger)||void 0===a||a.warn("Variation called before LaunchDarkly client initialization completed (did you wait for the 'ready' event?) - using last known values from feature store"),void this.variationInternal(e,t,r,i,n);null===(o=this.logger)||void 0===o||o.warn("Variation called before LaunchDarkly client initialization completed (did you wait for the'ready' event?) - using default value"),n(Na.default.forError($a.default.ClientNotReady,void 0,r));}));}};var Ya={},Za={},Qa={},eo={};Object.defineProperty(eo,"__esModule",{value:!0});eo.default=class{constructor(e,t,r,i){this.filesystem=e,this.paths=t,this.watch=r,this.callback=i,this.watchers=[],this.fileData={},this.fileTimestamps={};}async loadAndWatch(){const e=this.paths.map((async e=>({data:await this.filesystem.readFile(e),path:e,timeStamp:await this.filesystem.getFileTimestamp(e)}))),t=await Promise.all(e);t.forEach((e=>{this.fileData[e.path]=e.data,this.fileTimestamps[e.path]=e.timeStamp;})),this.callback(t),this.watch&&this.paths.forEach((e=>{const t=this.filesystem.watch(e,(async(e,t)=>{const r=await this.filesystem.getFileTimestamp(t);if(r===this.fileTimestamps[t])return;this.fileTimestamps[t]=r;const i=await this.filesystem.readFile(t);this.fileData[t]=i,this.debounceCallback();}));this.watchers.push(t);}));}close(){this.watchers.forEach((e=>e.close()));}debounceCallback(){this.debounceHandle||(this.debounceHandle=e=>{e();});}},Object.defineProperty(Qa,"__esModule",{value:!0});const to=$t,ro=Et,io=eo;Qa.default=class{constructor(e,t,r){var i;this.featureStore=r,this.allData={},this.fileLoader=new io.default(t,e.paths,null!==(i=e.autoUpdate)&&void 0!==i&&i,(e=>{var t,r;try{this.processFileData(e);}catch(e){null===(t=this.initCallback)||void 0===t||t.call(this,e),null===(r=this.logger)||void 0===r||r.error(`Error processing files: ${e}`);}})),this.logger=e.logger,this.yamlParser=e.yamlParser;}start(e){this.initCallback=e,(async()=>{try{await this.fileLoader.loadAndWatch();}catch(t){null==e||e(t);}})();}stop(){this.fileLoader.close();}close(){this.stop();}addItem(e,t){if(this.allData[e.namespace]||(this.allData[e.namespace]={}),this.allData[e.namespace][t.key])throw new Error(`found duplicate key: "${t.key}"`);this.allData[e.namespace][t.key]=t;}processFileData(e){this.allData={},e.forEach((e=>{let t;if(e.path.endsWith(".yml")||e.path.endsWith(".yaml")){if(!this.yamlParser)throw new Error(`Attempted to parse yaml file (${e.path}) without parser.`);t=this.yamlParser(e.data);}else t=JSON.parse(e.data);this.processParsedData(t);})),this.featureStore.init(this.allData,(()=>{var e;null===(e=this.initCallback)||void 0===e||e.call(this),this.initCallback=void 0;}));}processParsedData(e){Object.keys(e.flags||{}).forEach((t=>{(0, to.processFlag)(e.flags[t]),this.addItem(ro.default.Features,e.flags[t]);})),Object.keys(e.flagValues||{}).forEach((t=>{const r=function(e,t){return {key:e,on:!0,fallthrough:{variation:0},variations:[t],version:1}}(t,e.flagValues[t]);(0, to.processFlag)(r),this.addItem(ro.default.Features,r);})),Object.keys(e.segments||{}).forEach((t=>{(0, to.processSegment)(e.segments[t]),this.addItem(ro.default.Segments,e.segments[t]);}));}},Object.defineProperty(Za,"__esModule",{value:!0});const no=Qa;Za.default=class{constructor(e){this.options=e;}create(e,t){const r={paths:this.options.paths,autoUpdate:this.options.autoUpdate,logger:this.options.logger||e.basicConfiguration.logger,yamlParser:this.options.yamlParser};return new no.default(r,e.platform.fileSystem,t)}getFactory(){return (e,t)=>this.create(e,t)}};var so={},ao={},oo={},lo={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.variationForBoolean=e.FALSE_VARIATION_INDEX=e.TRUE_VARIATION_INDEX=void 0,e.TRUE_VARIATION_INDEX=0,e.FALSE_VARIATION_INDEX=1,e.variationForBoolean=function(t){return t?e.TRUE_VARIATION_INDEX:e.FALSE_VARIATION_INDEX};}(lo);var uo={};Object.defineProperty(uo,"__esModule",{value:!0});const co=o,ho=lo;class fo{constructor(e,t,r){this.flagBuilder=e,this.clauses=[],t&&(this.clauses=[...t]),void 0!==r&&(this.variation=r);}andMatch(e,t,...r){return this.clauses.push({contextKind:e,attribute:t,attributeReference:new co.AttributeReference(t),op:"in",values:r,negate:!1}),this}andNotMatch(e,t,...r){return this.clauses.push({contextKind:e,attribute:t,attributeReference:new co.AttributeReference(t),op:"in",values:r,negate:!0}),this}thenReturn(e){return co.TypeValidators.Boolean.is(e)?(this.flagBuilder.booleanFlag(),this.thenReturn((0, ho.variationForBoolean)(e))):(this.variation=e,this.flagBuilder.addRule(this),this.flagBuilder)}build(e){return {id:`rule${e}`,variation:this.variation,clauses:this.clauses}}clone(){return new fo(this.flagBuilder,this.clauses,this.variation)}}uo.default=fo,Object.defineProperty(oo,"__esModule",{value:!0});const po=o,vo=lo,go=uo;class yo{constructor(e,t){this.key=e,this.data={on:!0,variations:[]},t&&(this.data={on:t.on,variations:[...t.variations]},void 0!==t.offVariation&&(this.data.offVariation=t.offVariation),void 0!==t.fallthroughVariation&&(this.data.fallthroughVariation=t.fallthroughVariation),t.targetsByVariation&&(this.data.targetsByVariation=JSON.parse(JSON.stringify(t.targetsByVariation))),t.rules&&(this.data.rules=[],t.rules.forEach((e=>{var t;null===(t=this.data.rules)||void 0===t||t.push(e.clone());}))));}get isBooleanFlag(){return 2===this.data.variations.length&&!0===this.data.variations[vo.TRUE_VARIATION_INDEX]&&!1===this.data.variations[vo.FALSE_VARIATION_INDEX]}booleanFlag(){return this.isBooleanFlag?this:this.variations(!0,!1).fallthroughVariation(vo.TRUE_VARIATION_INDEX).offVariation(vo.FALSE_VARIATION_INDEX)}variations(...e){return this.data.variations=[...e],this}on(e){return this.data.on=e,this}fallthroughVariation(e){return po.TypeValidators.Boolean.is(e)?this.booleanFlag().fallthroughVariation((0, vo.variationForBoolean)(e)):(this.data.fallthroughVariation=e,this)}offVariation(e){return po.TypeValidators.Boolean.is(e)?this.booleanFlag().offVariation((0, vo.variationForBoolean)(e)):(this.data.offVariation=e,this)}variationForAll(e){return this.on(!0).clearRules().clearAllTargets().fallthroughVariation(e)}valueForAll(e){return this.variations(e).variationForAll(0)}variationForUser(e,t){return this.variationForContext("user",e,t)}variationForContext(e,t,r){return po.TypeValidators.Boolean.is(r)?this.booleanFlag().variationForContext(e,t,(0, vo.variationForBoolean)(r)):(this.data.targetsByVariation||(this.data.targetsByVariation={}),this.data.variations.forEach(((i,n)=>{if(n===r){const r=this.data.targetsByVariation[n]||{};e in r||(r[e]=[]);-1!==r[e].indexOf(t)||r[e].push(t),this.data.targetsByVariation[n]=r;}else {const r=this.data.targetsByVariation[n];if(r){const i=r[e];if(i){const n=i.indexOf(t);-1!==n&&(i.splice(n,1),i.length||delete r[e]);}Object.keys(r).length||delete this.data.targetsByVariation[n];}}})),this)}clearRules(){return delete this.data.rules,this}clearAllTargets(){return delete this.data.targetsByVariation,this}ifMatch(e,t,...r){return new go.default(this).andMatch(e,t,...r)}ifNotMatch(e,t,...r){return new go.default(this).andNotMatch(e,t,...r)}addRule(e){this.data.rules||(this.data.rules=[]),this.data.rules.push(e);}build(e){const t={key:this.key,version:e,on:this.data.on,offVariation:this.data.offVariation,fallthrough:{variation:this.data.fallthroughVariation},variations:[...this.data.variations]};if(this.data.targetsByVariation){const e=[],r=[];Object.entries(this.data.targetsByVariation).forEach((([t,i])=>{Object.entries(i).forEach((([i,n])=>{const s=parseInt(t,10);e.push({contextKind:i,values:"user"===i?[]:n,variation:s}),"user"===i&&r.push({values:n,variation:s});}));})),t.targets=r,t.contextTargets=e;}return this.data.rules&&(t.rules=this.data.rules.map(((e,t)=>e.build(String(t))))),t}clone(){return new yo(this.key,this.data)}getKey(){return this.key}}oo.default=yo;var mo={};Object.defineProperty(mo,"__esModule",{value:!0});const bo=Et;mo.default=class{constructor(e,t,r,i){this.featureStore=e,this.flags=t,this.segments=r,this.onStop=i;}async start(e){await this.featureStore.init({[bo.default.Features.namespace]:Object.assign({},this.flags),[bo.default.Segments.namespace]:Object.assign({},this.segments)}),null==e||e();}stop(){this.onStop(this);}close(){this.stop();}async upsert(e,t){return this.featureStore.upsert(e,t)}},Object.defineProperty(ao,"__esModule",{value:!0});const _o=na,Eo=$t,wo=Et,Oo=oo,So=mo;ao.default=class{constructor(){this.currentFlags={},this.currentSegments={},this.dataSources=[],this.flagBuilders={};}getFactory(){return (e,t)=>{const r=new So.default(new _o.default(t),this.currentFlags,this.currentSegments,(e=>{this.dataSources.splice(this.dataSources.indexOf(e));}));return this.dataSources.push(r),r}}flag(e){return this.flagBuilders[e]?this.flagBuilders[e].clone():new Oo.default(e).booleanFlag()}update(e){const t=e.getKey(),r=this.currentFlags[t],i=r?r.version:0,n=e.build(i+1);return this.currentFlags[t]=n,this.flagBuilders[t]=e.clone(),Promise.all(this.dataSources.map((e=>e.upsert(wo.default.Features,n))))}usePreconfiguredFlag(e){const t=JSON.parse(JSON.stringify(e)),r=this.currentFlags[t.key],i=Object.assign(Object.assign({},t),{version:r?r.version+1:t.version});return (0, Eo.processFlag)(i),this.currentFlags[t.key]=i,Promise.all(this.dataSources.map((e=>e.upsert(wo.default.Features,i))))}usePreconfiguredSegment(e){const t=JSON.parse(JSON.stringify(e)),r=this.currentSegments[t.key],i=Object.assign(Object.assign({},t),{version:r?r.version+1:t.version});return (0, Eo.processSegment)(i),this.currentSegments[t.key]=i,Promise.all(this.dataSources.map((e=>e.upsert(wo.default.Segments,i))))}},Object.defineProperty(so,"__esModule",{value:!0}),so.TestDataRuleBuilder=so.TestDataFlagBuilder=so.TestData=void 0;const xo=ao;so.TestData=xo.default;const ko=oo;so.TestDataFlagBuilder=ko.default;const Po=uo;so.TestDataRuleBuilder=Po.default,function(e){var r=t&&t.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n);}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r];}),i=t&&t.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i);};Object.defineProperty(e,"__esModule",{value:!0}),e.FileDataSourceFactory=void 0;const n=Za;e.FileDataSourceFactory=n.default,i(so,e);}(Ya);var Ao={},Io={},Ro={};Object.defineProperty(Ro,"__esModule",{value:!0});var Mo={};Object.defineProperty(Mo,"__esModule",{value:!0}),function(e){var r=t&&t.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n);}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r];}),i=t&&t.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i);};Object.defineProperty(e,"__esModule",{value:!0}),i(Ro,e),i(Mo,e);}(Io);var jo={},Do={};Object.defineProperty(Do,"__esModule",{value:!0});var To={};Object.defineProperty(To,"__esModule",{value:!0});var Co={};Object.defineProperty(Co,"__esModule",{value:!0});var Fo={};Object.defineProperty(Fo,"__esModule",{value:!0}),function(e){var r=t&&t.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n);}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r];}),i=t&&t.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i);};Object.defineProperty(e,"__esModule",{value:!0}),i(Do,e),i(To,e),i(Co,e),i(Fo,e);}(jo);var $o={};Object.defineProperty($o,"__esModule",{value:!0});var No={};Object.defineProperty(No,"__esModule",{value:!0});var Bo={};Object.defineProperty(Bo,"__esModule",{value:!0});var Lo={};Object.defineProperty(Lo,"__esModule",{value:!0});var Vo={},zo={};Object.defineProperty(zo,"__esModule",{value:!0}),function(e){var r=t&&t.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n);}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r];}),i=t&&t.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i);};Object.defineProperty(e,"__esModule",{value:!0}),i(zo,e);}(Vo);var Uo={},Ho={};Object.defineProperty(Ho,"__esModule",{value:!0});var Ko={};Object.defineProperty(Ko,"__esModule",{value:!0});var qo={};Object.defineProperty(qo,"__esModule",{value:!0});var Go={};Object.defineProperty(Go,"__esModule",{value:!0});var Wo={};Object.defineProperty(Wo,"__esModule",{value:!0});var Xo={};Object.defineProperty(Xo,"__esModule",{value:!0});var Jo={};Object.defineProperty(Jo,"__esModule",{value:!0});var Yo={};Object.defineProperty(Yo,"__esModule",{value:!0});var Zo={};Object.defineProperty(Zo,"__esModule",{value:!0});var Qo={};Object.defineProperty(Qo,"__esModule",{value:!0}),function(e){var r=t&&t.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n);}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r];}),i=t&&t.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i);};Object.defineProperty(e,"__esModule",{value:!0}),i(Ho,e),i(Ko,e),i(qo,e),i(Go,e),i(Wo,e),i(No,e),i(Xo,e),i(Jo,e),i(Yo,e),i(Zo,e),i(Qo,e);}(Uo);var el={},tl={};Object.defineProperty(tl,"__esModule",{value:!0});var rl={};Object.defineProperty(rl,"__esModule",{value:!0}),function(e){var r=t&&t.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n);}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r];}),i=t&&t.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i);};Object.defineProperty(e,"__esModule",{value:!0}),i(tl,e),i(Bo,e),i(Lo,e),i(rl,e);}(el),function(e){var r=t&&t.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n);}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r];}),i=t&&t.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i);};Object.defineProperty(e,"__esModule",{value:!0}),e.subsystems=e.interfaces=e.integrations=void 0,i(Io,e),i(jo,e),i($o,e),i(No,e),i(Bo,e),i(Lo,e),e.integrations=Vo,e.interfaces=Uo,e.subsystems=el;}(Ao);var il={},nl={};Object.defineProperty(nl,"__esModule",{value:!0});nl.default=class{constructor(e,t){this.handlers={},this.closed=!1,this.url=e,this.options=t;}addEventListener(e,t){this.handlers[e]=t;}close(){this.closed=!0;}simulateError(e){this.options.errorFilter(e)||(this.closed=!0);}},Object.defineProperty(il,"__esModule",{value:!0}),il.NullEventSource=void 0;const sl=nl;il.NullEventSource=sl.default,function(e){var r=t&&t.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n);}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r];}),i=t&&t.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i);};Object.defineProperty(e,"__esModule",{value:!0}),e.BigSegmentStoreStatusProviderImpl=e.LDClientImpl=e.platform=e.integrations=void 0;const n=s;e.BigSegmentStoreStatusProviderImpl=n.default;const l=a;e.LDClientImpl=l.default,e.integrations=Ya,e.platform=o,i(Ao,e),i(ia,e),i(il,e),i(o,e);}(n);var al={},ol={},ll={};Object.defineProperty(ll,"__esModule",{value:!0}),ll.createCallbacks=void 0;ll.createCallbacks=()=>({onError:e=>{},onFailed:e=>{},onReady:()=>{},onUpdate:e=>{},hasEventListeners:()=>!1});var ul={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createOptions=e.defaultOptions=void 0;const t=n;e.defaultOptions={stream:!1,sendEvents:!1,useLdd:!0,diagnosticOptOut:!0,logger:t.BasicLogger.get()};e.createOptions=t=>{var r;const i=Object.assign(Object.assign({},e.defaultOptions),t);return null===(r=i.logger)||void 0===r||r.debug(`Using LD options: ${JSON.stringify(i)}`),i};}(ul);var cl={},dl=t&&t.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);}return r};Object.defineProperty(cl,"__esModule",{value:!0}),cl.validateOptions=void 0;cl.validateOptions=(e,t)=>{const{featureStore:r,logger:i,sendEvents:n}=t,s=dl(t,["featureStore","logger","sendEvents"]);if(!e)throw new Error("You must configure the client with a client key");if(!r||"object"!=typeof r||!r.get)throw new Error("You must configure the client with a feature store");if(!i)throw new Error("You must configure the client with a logger");if("{}"!==JSON.stringify(s))throw new Error(`Invalid configuration: ${Object.keys(s).toString()} not supported`);return !0},function(e){var r=t&&t.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n);}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r];}),i=t&&t.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i);};Object.defineProperty(e,"__esModule",{value:!0}),i(ll,e),i(ul,e),i(cl,e);}(ol),Object.defineProperty(al,"__esModule",{value:!0});const hl=n,fl=ol;al.default=class extends hl.LDClientImpl{constructor(e,t,r,i){super(e,t,(0, fl.createOptions)(r),(0, fl.createCallbacks)()),this.cacheableStoreProvider=i;}waitForInitialization(){return Promise.resolve(this)}async variation(e,t,r,i){return await this.cacheableStoreProvider.prefetchPayloadFromOriginStore(),super.variation(e,t,r,i)}async variationDetail(e,t,r,i){return await this.cacheableStoreProvider.prefetchPayloadFromOriginStore(),super.variationDetail(e,t,r,i)}async allFlagsState(e,t,r){return await this.cacheableStoreProvider.prefetchPayloadFromOriginStore(),super.allFlagsState(e,t,r)}};var pl={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EdgeFeatureStore=e.buildRootKey=void 0;const t=n;e.buildRootKey=e=>`LD-Env-${e}`;e.EdgeFeatureStore=class{constructor(r,i,n,s){this.edgeProvider=r,this.sdkKey=i,this.description=n,this.logger=s,this.close=t.noop,this.delete=t.noop,this.upsert=t.noop,this.rootKey=(0, e.buildRootKey)(this.sdkKey);}async get(e,r,i){const{namespace:n}=e,s="features"===n?"flags":n;this.logger.debug(`Requesting ${r} from ${this.rootKey}.${s}`);try{const e=await this.edgeProvider.get(this.rootKey);if(!e)throw new Error(`${this.rootKey}.${s} is not found in KV.`);const a=(0,t.deserializePoll)(e);if(!a)throw new Error(`Error deserializing ${s}`);switch(n){case"features":i(a.flags[r]);break;case"segments":i(a.segments[r]);break;default:throw new Error(`Unsupported DataKind: ${n}`)}}catch(e){this.logger.error(e),i(null);}}async all(e,r=t.noop){const{namespace:i}=e,n="features"===i?"flags":i;this.logger.debug(`Requesting all from ${this.rootKey}.${n}`);try{const e=await this.edgeProvider.get(this.rootKey);if(!e)throw new Error(`${this.rootKey}.${n} is not found in KV.`);const s=(0,t.deserializePoll)(e);if(!s)throw new Error(`Error deserializing ${n}`);switch(i){case"features":r(s.flags);break;case"segments":r(s.segments);break;default:throw new Error(`Unsupported DataKind: ${i}`)}}catch(e){this.logger.error(e),r({});}}async initialized(e=t.noop){const r=null!==await this.edgeProvider.get(this.rootKey);this.logger.debug(`Is ${this.rootKey} initialized? ${r}`),e(r);}init(e,t){t();}getDescription(){return this.description}};}(pl);var vl={};Object.defineProperty(vl,"__esModule",{value:!0});vl.default=class{constructor(e,t){this.edgeProvider=e,this.rootKey=t;}async get(e){return this.cache||(this.cache=await this.edgeProvider.get(e)),this.cache}async prefetchPayloadFromOriginStore(e){return this.cache=void 0,this.get(e||this.rootKey)}};var gl={},yl={},ml=r(e),bl={},_l={exports:{}};var El,wl={exports:{}};function Ol(){return El||(El=1,wl.exports=function(){var e=e||function(e,r){var i;if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),"undefined"!=typeof self&&self.crypto&&(i=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(i=globalThis.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&void 0!==t&&t.crypto&&(i=t.crypto),!i)try{i=require("crypto");}catch(e){}var n=function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),a={},o=a.lib={},l=o.Base={extend:function(e){var t=s(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments);}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString);},clone:function(){return this.init.prototype.extend(this)}},u=o.WordArray=l.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=t!=r?t:4*e.length;},toString:function(e){return (e||d).stringify(this)},concat:function(e){var t=this.words,r=e.words,i=this.sigBytes,n=e.sigBytes;if(this.clamp(),i%4)for(var s=0;s<n;s++){var a=r[s>>>2]>>>24-s%4*8&255;t[i+s>>>2]|=a<<24-(i+s)%4*8;}else for(var o=0;o<n;o+=4)t[i+o>>>2]=r[o>>>2];return this.sigBytes+=n,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4);},clone:function(){var e=l.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(n());return new u.init(t,e)}}),c=a.enc={},d=c.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var s=t[n>>>2]>>>24-n%4*8&255;i.push((s>>>4).toString(16)),i.push((15&s).toString(16));}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new u.init(r,t/2)}},h=c.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var s=t[n>>>2]>>>24-n%4*8&255;i.push(String.fromCharCode(s));}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new u.init(r,t)}},f=c.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},p=o.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new u.init,this._nDataBytes=0;},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes;},_process:function(t){var r,i=this._data,n=i.words,s=i.sigBytes,a=this.blockSize,o=s/(4*a),l=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*a,c=e.min(4*l,s);if(l){for(var d=0;d<l;d+=a)this._doProcessBlock(n,d);r=n.splice(0,l),i.sigBytes-=c;}return new u.init(r,c)},clone:function(){var e=l.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});o.Hasher=p.extend({cfg:l.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset();},reset:function(){p.reset.call(this),this._doReset();},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new v.HMAC.init(e,r).finalize(t)}}});var v=a.algo={};return a}(Math);return e}()),wl.exports}var Sl,xl={exports:{}};function kl(){return Sl||(Sl=1,xl.exports=function(e){return i=(r=e).lib,n=i.Base,s=i.WordArray,(a=r.x64={}).Word=n.extend({init:function(e,t){this.high=e,this.low=t;}}),a.WordArray=n.extend({init:function(e,r){e=this.words=e||[],this.sigBytes=r!=t?r:8*e.length;},toX32:function(){for(var e=this.words,t=e.length,r=[],i=0;i<t;i++){var n=e[i];r.push(n.high),r.push(n.low);}return s.create(r,this.sigBytes)},clone:function(){for(var e=n.clone.call(this),t=e.words=this.words.slice(0),r=t.length,i=0;i<r;i++)t[i]=t[i].clone();return e}}),e;var t,r,i,n,s,a;}(Ol())),xl.exports}var Pl,Al={exports:{}};function Il(){return Pl||(Pl=1,Al.exports=function(e){return function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,r=t.init,i=t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,i=[],n=0;n<t;n++)i[n>>>2]|=e[n]<<24-n%4*8;r.call(this,i,t);}else r.apply(this,arguments);};i.prototype=t;}}(),e.lib.WordArray}(Ol())),Al.exports}var Rl,Ml={exports:{}};function jl(){return Rl?Ml.exports:(Rl=1,Ml.exports=function(e){return function(){var t=e,r=t.lib.WordArray,i=t.enc;function n(e){return e<<8&4278255360|e>>>8&16711935}i.Utf16=i.Utf16BE={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n+=2){var s=t[n>>>2]>>>16-n%4*8&65535;i.push(String.fromCharCode(s));}return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>1]|=e.charCodeAt(n)<<16-n%2*16;return r.create(i,2*t)}},i.Utf16LE={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],s=0;s<r;s+=2){var a=n(t[s>>>2]>>>16-s%4*8&65535);i.push(String.fromCharCode(a));}return i.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s++)i[s>>>1]|=n(e.charCodeAt(s)<<16-s%2*16);return r.create(i,2*t)}};}(),e.enc.Utf16}(Ol()))}var Dl,Cl=function(e){return function(){var t=e,r=t.lib.WordArray;function i(e,t,i){for(var n=[],s=0,a=0;a<t;a++)if(a%4){var o=i[e.charCodeAt(a-1)]<<a%4*2|i[e.charCodeAt(a)]>>>6-a%4*2;n[s>>>2]|=o<<24-s%4*8,s++;}return r.create(n,s)}t.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,i=this._map;e.clamp();for(var n=[],s=0;s<r;s+=3)for(var a=(t[s>>>2]>>>24-s%4*8&255)<<16|(t[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|t[s+2>>>2]>>>24-(s+2)%4*8&255,o=0;o<4&&s+.75*o<r;o++)n.push(i.charAt(a>>>6*(3-o)&63));var l=i.charAt(64);if(l)for(;n.length%4;)n.push(l);return n.join("")},parse:function(e){var t=e.length,r=this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var s=0;s<r.length;s++)n[r.charCodeAt(s)]=s;}var a=r.charAt(64);if(a){var o=e.indexOf(a);-1!==o&&(t=o);}return i(e,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};}(),e.enc.Base64}(Ol()),Fl={exports:{}};function $l(){return Dl?Fl.exports:(Dl=1,Fl.exports=function(e){return function(){var t=e,r=t.lib.WordArray;function i(e,t,i){for(var n=[],s=0,a=0;a<t;a++)if(a%4){var o=i[e.charCodeAt(a-1)]<<a%4*2|i[e.charCodeAt(a)]>>>6-a%4*2;n[s>>>2]|=o<<24-s%4*8,s++;}return r.create(n,s)}t.enc.Base64url={stringify:function(e,t=!0){var r=e.words,i=e.sigBytes,n=t?this._safe_map:this._map;e.clamp();for(var s=[],a=0;a<i;a+=3)for(var o=(r[a>>>2]>>>24-a%4*8&255)<<16|(r[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|r[a+2>>>2]>>>24-(a+2)%4*8&255,l=0;l<4&&a+.75*l<i;l++)s.push(n.charAt(o>>>6*(3-l)&63));var u=n.charAt(64);if(u)for(;s.length%4;)s.push(u);return s.join("")},parse:function(e,t=!0){var r=e.length,n=t?this._safe_map:this._map,s=this._reverseMap;if(!s){s=this._reverseMap=[];for(var a=0;a<n.length;a++)s[n.charCodeAt(a)]=a;}var o=n.charAt(64);if(o){var l=e.indexOf(o);-1!==l&&(r=l);}return i(e,r,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};}(),e.enc.Base64url}(Ol()))}var Nl,Bl={exports:{}};function Ll(){return Nl||(Nl=1,Bl.exports=function(e){return function(t){var r=e,i=r.lib,n=i.WordArray,s=i.Hasher,a=r.algo,o=[];!function(){for(var e=0;e<64;e++)o[e]=4294967296*t.abs(t.sin(e+1))|0;}();var l=a.MD5=s.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878]);},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var i=t+r,n=e[i];e[i]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8);}var s=this._hash.words,a=e[t+0],l=e[t+1],f=e[t+2],p=e[t+3],v=e[t+4],g=e[t+5],y=e[t+6],m=e[t+7],b=e[t+8],_=e[t+9],E=e[t+10],w=e[t+11],O=e[t+12],S=e[t+13],x=e[t+14],k=e[t+15],P=s[0],A=s[1],I=s[2],R=s[3];P=u(P,A,I,R,a,7,o[0]),R=u(R,P,A,I,l,12,o[1]),I=u(I,R,P,A,f,17,o[2]),A=u(A,I,R,P,p,22,o[3]),P=u(P,A,I,R,v,7,o[4]),R=u(R,P,A,I,g,12,o[5]),I=u(I,R,P,A,y,17,o[6]),A=u(A,I,R,P,m,22,o[7]),P=u(P,A,I,R,b,7,o[8]),R=u(R,P,A,I,_,12,o[9]),I=u(I,R,P,A,E,17,o[10]),A=u(A,I,R,P,w,22,o[11]),P=u(P,A,I,R,O,7,o[12]),R=u(R,P,A,I,S,12,o[13]),I=u(I,R,P,A,x,17,o[14]),P=c(P,A=u(A,I,R,P,k,22,o[15]),I,R,l,5,o[16]),R=c(R,P,A,I,y,9,o[17]),I=c(I,R,P,A,w,14,o[18]),A=c(A,I,R,P,a,20,o[19]),P=c(P,A,I,R,g,5,o[20]),R=c(R,P,A,I,E,9,o[21]),I=c(I,R,P,A,k,14,o[22]),A=c(A,I,R,P,v,20,o[23]),P=c(P,A,I,R,_,5,o[24]),R=c(R,P,A,I,x,9,o[25]),I=c(I,R,P,A,p,14,o[26]),A=c(A,I,R,P,b,20,o[27]),P=c(P,A,I,R,S,5,o[28]),R=c(R,P,A,I,f,9,o[29]),I=c(I,R,P,A,m,14,o[30]),P=d(P,A=c(A,I,R,P,O,20,o[31]),I,R,g,4,o[32]),R=d(R,P,A,I,b,11,o[33]),I=d(I,R,P,A,w,16,o[34]),A=d(A,I,R,P,x,23,o[35]),P=d(P,A,I,R,l,4,o[36]),R=d(R,P,A,I,v,11,o[37]),I=d(I,R,P,A,m,16,o[38]),A=d(A,I,R,P,E,23,o[39]),P=d(P,A,I,R,S,4,o[40]),R=d(R,P,A,I,a,11,o[41]),I=d(I,R,P,A,p,16,o[42]),A=d(A,I,R,P,y,23,o[43]),P=d(P,A,I,R,_,4,o[44]),R=d(R,P,A,I,O,11,o[45]),I=d(I,R,P,A,k,16,o[46]),P=h(P,A=d(A,I,R,P,f,23,o[47]),I,R,a,6,o[48]),R=h(R,P,A,I,m,10,o[49]),I=h(I,R,P,A,x,15,o[50]),A=h(A,I,R,P,g,21,o[51]),P=h(P,A,I,R,O,6,o[52]),R=h(R,P,A,I,p,10,o[53]),I=h(I,R,P,A,E,15,o[54]),A=h(A,I,R,P,l,21,o[55]),P=h(P,A,I,R,b,6,o[56]),R=h(R,P,A,I,k,10,o[57]),I=h(I,R,P,A,y,15,o[58]),A=h(A,I,R,P,S,21,o[59]),P=h(P,A,I,R,v,6,o[60]),R=h(R,P,A,I,w,10,o[61]),I=h(I,R,P,A,f,15,o[62]),A=h(A,I,R,P,_,21,o[63]),s[0]=s[0]+P|0,s[1]=s[1]+A|0,s[2]=s[2]+I|0,s[3]=s[3]+R|0;},_doFinalize:function(){var e=this._data,r=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;r[n>>>5]|=128<<24-n%32;var s=t.floor(i/4294967296),a=i;r[15+(n+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),r[14+(n+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(r.length+1),this._process();for(var o=this._hash,l=o.words,u=0;u<4;u++){var c=l[u];l[u]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8);}return o},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,r,i,n,s,a){var o=e+(t&r|~t&i)+n+a;return (o<<s|o>>>32-s)+t}function c(e,t,r,i,n,s,a){var o=e+(t&i|r&~i)+n+a;return (o<<s|o>>>32-s)+t}function d(e,t,r,i,n,s,a){var o=e+(t^r^i)+n+a;return (o<<s|o>>>32-s)+t}function h(e,t,r,i,n,s,a){var o=e+(r^(t|~i))+n+a;return (o<<s|o>>>32-s)+t}r.MD5=s._createHelper(l),r.HmacMD5=s._createHmacHelper(l);}(Math),e.MD5}(Ol())),Bl.exports}var Vl,zl={exports:{}};function Ul(){return Vl||(Vl=1,zl.exports=function(e){return r=(t=e).lib,i=r.WordArray,n=r.Hasher,s=t.algo,a=[],o=s.SHA1=n.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520]);},_doProcessBlock:function(e,t){for(var r=this._hash.words,i=r[0],n=r[1],s=r[2],o=r[3],l=r[4],u=0;u<80;u++){if(u<16)a[u]=0|e[t+u];else {var c=a[u-3]^a[u-8]^a[u-14]^a[u-16];a[u]=c<<1|c>>>31;}var d=(i<<5|i>>>27)+l+a[u];d+=u<20?1518500249+(n&s|~n&o):u<40?1859775393+(n^s^o):u<60?(n&s|n&o|s&o)-1894007588:(n^s^o)-899497514,l=o,o=s,s=n<<30|n>>>2,n=i,i=d;}r[0]=r[0]+i|0,r[1]=r[1]+n|0,r[2]=r[2]+s|0,r[3]=r[3]+o|0,r[4]=r[4]+l|0;},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(i+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA1=n._createHelper(o),t.HmacSHA1=n._createHmacHelper(o),e.SHA1;var t,r,i,n,s,a,o;}(Ol())),zl.exports}var Hl,Kl={exports:{}};function ql(){return Hl||(Hl=1,Kl.exports=function(e){return function(t){var r=e,i=r.lib,n=i.WordArray,s=i.Hasher,a=r.algo,o=[],l=[];!function(){function e(e){for(var r=t.sqrt(e),i=2;i<=r;i++)if(!(e%i))return !1;return !0}function r(e){return 4294967296*(e-(0|e))|0}for(var i=2,n=0;n<64;)e(i)&&(n<8&&(o[n]=r(t.pow(i,.5))),l[n]=r(t.pow(i,1/3)),n++),i++;}();var u=[],c=a.SHA256=s.extend({_doReset:function(){this._hash=new n.init(o.slice(0));},_doProcessBlock:function(e,t){for(var r=this._hash.words,i=r[0],n=r[1],s=r[2],a=r[3],o=r[4],c=r[5],d=r[6],h=r[7],f=0;f<64;f++){if(f<16)u[f]=0|e[t+f];else {var p=u[f-15],v=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,g=u[f-2],y=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;u[f]=v+u[f-7]+y+u[f-16];}var m=i&n^i&s^n&s,b=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),_=h+((o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25))+(o&c^~o&d)+l[f]+u[f];h=d,d=c,c=o,o=a+_|0,a=s,s=n,n=i,i=_+(b+m)|0;}r[0]=r[0]+i|0,r[1]=r[1]+n|0,r[2]=r[2]+s|0,r[3]=r[3]+a|0,r[4]=r[4]+o|0,r[5]=r[5]+c|0,r[6]=r[6]+d|0,r[7]=r[7]+h|0;},_doFinalize:function(){var e=this._data,r=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return r[n>>>5]|=128<<24-n%32,r[14+(n+64>>>9<<4)]=t.floor(i/4294967296),r[15+(n+64>>>9<<4)]=i,e.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});r.SHA256=s._createHelper(c),r.HmacSHA256=s._createHmacHelper(c);}(Math),e.SHA256}(Ol())),Kl.exports}var Gl;var Xl,Jl={exports:{}};function Yl(){return Xl||(Xl=1,Jl.exports=function(e){return function(){var t=e,r=t.lib.Hasher,i=t.x64,n=i.Word,s=i.WordArray,a=t.algo;function o(){return n.create.apply(n,arguments)}var l=[o(1116352408,3609767458),o(1899447441,602891725),o(3049323471,3964484399),o(3921009573,2173295548),o(961987163,4081628472),o(1508970993,3053834265),o(2453635748,2937671579),o(2870763221,3664609560),o(3624381080,2734883394),o(310598401,1164996542),o(607225278,1323610764),o(1426881987,3590304994),o(1925078388,4068182383),o(2162078206,991336113),o(2614888103,633803317),o(3248222580,3479774868),o(3835390401,2666613458),o(4022224774,944711139),o(264347078,2341262773),o(604807628,2007800933),o(770255983,1495990901),o(1249150122,1856431235),o(1555081692,3175218132),o(1996064986,2198950837),o(2554220882,3999719339),o(2821834349,766784016),o(2952996808,2566594879),o(3210313671,3203337956),o(3336571891,1034457026),o(3584528711,2466948901),o(113926993,3758326383),o(338241895,168717936),o(666307205,1188179964),o(773529912,1546045734),o(1294757372,1522805485),o(1396182291,2643833823),o(1695183700,2343527390),o(1986661051,1014477480),o(2177026350,1206759142),o(2456956037,344077627),o(2730485921,1290863460),o(2820302411,3158454273),o(3259730800,3505952657),o(3345764771,106217008),o(3516065817,3606008344),o(3600352804,1432725776),o(4094571909,1467031594),o(275423344,851169720),o(430227734,3100823752),o(506948616,1363258195),o(659060556,3750685593),o(883997877,3785050280),o(958139571,3318307427),o(1322822218,3812723403),o(1537002063,2003034995),o(1747873779,3602036899),o(1955562222,1575990012),o(2024104815,1125592928),o(2227730452,2716904306),o(2361852424,442776044),o(2428436474,593698344),o(2756734187,3733110249),o(3204031479,2999351573),o(3329325298,3815920427),o(3391569614,3928383900),o(3515267271,566280711),o(3940187606,3454069534),o(4118630271,4000239992),o(116418474,1914138554),o(174292421,2731055270),o(289380356,3203993006),o(460393269,320620315),o(685471733,587496836),o(852142971,1086792851),o(1017036298,365543100),o(1126000580,2618297676),o(1288033470,3409855158),o(1501505948,4234509866),o(1607167915,987167468),o(1816402316,1246189591)],u=[];!function(){for(var e=0;e<80;e++)u[e]=o();}();var c=a.SHA512=r.extend({_doReset:function(){this._hash=new s.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)]);},_doProcessBlock:function(e,t){for(var r=this._hash.words,i=r[0],n=r[1],s=r[2],a=r[3],o=r[4],c=r[5],d=r[6],h=r[7],f=i.high,p=i.low,v=n.high,g=n.low,y=s.high,m=s.low,b=a.high,_=a.low,E=o.high,w=o.low,O=c.high,S=c.low,x=d.high,k=d.low,P=h.high,A=h.low,I=f,R=p,M=v,j=g,D=y,T=m,C=b,F=_,$=E,N=w,B=O,L=S,V=x,z=k,U=P,H=A,K=0;K<80;K++){var q,G,W=u[K];if(K<16)G=W.high=0|e[t+2*K],q=W.low=0|e[t+2*K+1];else {var X=u[K-15],J=X.high,Y=X.low,Z=(J>>>1|Y<<31)^(J>>>8|Y<<24)^J>>>7,Q=(Y>>>1|J<<31)^(Y>>>8|J<<24)^(Y>>>7|J<<25),ee=u[K-2],te=ee.high,re=ee.low,ie=(te>>>19|re<<13)^(te<<3|re>>>29)^te>>>6,ne=(re>>>19|te<<13)^(re<<3|te>>>29)^(re>>>6|te<<26),se=u[K-7],ae=se.high,oe=se.low,le=u[K-16],ue=le.high,ce=le.low;G=(G=(G=Z+ae+((q=Q+oe)>>>0<Q>>>0?1:0))+ie+((q+=ne)>>>0<ne>>>0?1:0))+ue+((q+=ce)>>>0<ce>>>0?1:0),W.high=G,W.low=q;}var de,he=$&B^~$&V,fe=N&L^~N&z,pe=I&M^I&D^M&D,ve=R&j^R&T^j&T,ge=(I>>>28|R<<4)^(I<<30|R>>>2)^(I<<25|R>>>7),ye=(R>>>28|I<<4)^(R<<30|I>>>2)^(R<<25|I>>>7),me=($>>>14|N<<18)^($>>>18|N<<14)^($<<23|N>>>9),be=(N>>>14|$<<18)^(N>>>18|$<<14)^(N<<23|$>>>9),_e=l[K],Ee=_e.high,we=_e.low,Oe=U+me+((de=H+be)>>>0<H>>>0?1:0),Se=ye+ve;U=V,H=z,V=B,z=L,B=$,L=N,$=C+(Oe=(Oe=(Oe=Oe+he+((de+=fe)>>>0<fe>>>0?1:0))+Ee+((de+=we)>>>0<we>>>0?1:0))+G+((de+=q)>>>0<q>>>0?1:0))+((N=F+de|0)>>>0<F>>>0?1:0)|0,C=D,F=T,D=M,T=j,M=I,j=R,I=Oe+(ge+pe+(Se>>>0<ye>>>0?1:0))+((R=de+Se|0)>>>0<de>>>0?1:0)|0;}p=i.low=p+R,i.high=f+I+(p>>>0<R>>>0?1:0),g=n.low=g+j,n.high=v+M+(g>>>0<j>>>0?1:0),m=s.low=m+T,s.high=y+D+(m>>>0<T>>>0?1:0),_=a.low=_+F,a.high=b+C+(_>>>0<F>>>0?1:0),w=o.low=w+N,o.high=E+$+(w>>>0<N>>>0?1:0),S=c.low=S+L,c.high=O+B+(S>>>0<L>>>0?1:0),k=d.low=k+z,d.high=x+V+(k>>>0<z>>>0?1:0),A=h.low=A+H,h.high=P+U+(A>>>0<H>>>0?1:0);},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[30+(i+128>>>10<<5)]=Math.floor(r/4294967296),t[31+(i+128>>>10<<5)]=r,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=r._createHelper(c),t.HmacSHA512=r._createHmacHelper(c);}(),e.SHA512}(Ol(),kl())),Jl.exports}var Zl;var eu,tu={exports:{}};function ru(){return eu||(eu=1,tu.exports=function(e){return function(t){var r=e,i=r.lib,n=i.WordArray,s=i.Hasher,a=r.x64.Word,o=r.algo,l=[],u=[],c=[];!function(){for(var e=1,t=0,r=0;r<24;r++){l[e+5*t]=(r+1)*(r+2)/2%64;var i=(2*e+3*t)%5;e=t%5,t=i;}for(e=0;e<5;e++)for(t=0;t<5;t++)u[e+5*t]=t+(2*e+3*t)%5*5;for(var n=1,s=0;s<24;s++){for(var o=0,d=0,h=0;h<7;h++){if(1&n){var f=(1<<h)-1;f<32?d^=1<<f:o^=1<<f-32;}128&n?n=n<<1^113:n<<=1;}c[s]=a.create(o,d);}}();var d=[];!function(){for(var e=0;e<25;e++)d[e]=a.create();}();var h=o.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32;},_doProcessBlock:function(e,t){for(var r=this._state,i=this.blockSize/2,n=0;n<i;n++){var s=e[t+2*n],a=e[t+2*n+1];s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(A=r[n]).high^=a,A.low^=s;}for(var o=0;o<24;o++){for(var h=0;h<5;h++){for(var f=0,p=0,v=0;v<5;v++)f^=(A=r[h+5*v]).high,p^=A.low;var g=d[h];g.high=f,g.low=p;}for(h=0;h<5;h++){var y=d[(h+4)%5],m=d[(h+1)%5],b=m.high,_=m.low;for(f=y.high^(b<<1|_>>>31),p=y.low^(_<<1|b>>>31),v=0;v<5;v++)(A=r[h+5*v]).high^=f,A.low^=p;}for(var E=1;E<25;E++){var w=(A=r[E]).high,O=A.low,S=l[E];S<32?(f=w<<S|O>>>32-S,p=O<<S|w>>>32-S):(f=O<<S-32|w>>>64-S,p=w<<S-32|O>>>64-S);var x=d[u[E]];x.high=f,x.low=p;}var k=d[0],P=r[0];for(k.high=P.high,k.low=P.low,h=0;h<5;h++)for(v=0;v<5;v++){var A=r[E=h+5*v],I=d[E],R=d[(h+1)%5+5*v],M=d[(h+2)%5+5*v];A.high=I.high^~R.high&M.high,A.low=I.low^~R.low&M.low;}A=r[0];var j=c[o];A.high^=j.high,A.low^=j.low;}},_doFinalize:function(){var e=this._data,r=e.words;this._nDataBytes;var i=8*e.sigBytes,s=32*this.blockSize;r[i>>>5]|=1<<24-i%32,r[(t.ceil((i+1)/s)*s>>>5)-1]|=128,e.sigBytes=4*r.length,this._process();for(var a=this._state,o=this.cfg.outputLength/8,l=o/8,u=[],c=0;c<l;c++){var d=a[c],h=d.high,f=d.low;h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),u.push(f),u.push(h);}return new n.init(u,o)},clone:function(){for(var e=s.clone.call(this),t=e._state=this._state.slice(0),r=0;r<25;r++)t[r]=t[r].clone();return e}});r.SHA3=s._createHelper(h),r.HmacSHA3=s._createHmacHelper(h);}(Math),e.SHA3}(Ol(),kl())),tu.exports}var iu;var su,au={exports:{}};function ou(){return su||(su=1,au.exports=function(e){var t,r,i;r=(t=e).lib.Base,i=t.enc.Utf8,t.algo.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var r=e.blockSize,n=4*r;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var s=this._oKey=t.clone(),a=this._iKey=t.clone(),o=s.words,l=a.words,u=0;u<r;u++)o[u]^=1549556828,l[u]^=909522486;s.sigBytes=a.sigBytes=n,this.reset();},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey);},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}});}(Ol())),au.exports}var lu;var cu,du={exports:{}};function hu(){return cu||(cu=1,du.exports=function(e){return r=(t=e).lib,i=r.Base,n=r.WordArray,s=t.algo,a=s.MD5,o=s.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e);},compute:function(e,t){for(var r,i=this.cfg,s=i.hasher.create(),a=n.create(),o=a.words,l=i.keySize,u=i.iterations;o.length<l;){r&&s.update(r),r=s.update(e).finalize(t),s.reset();for(var c=1;c<u;c++)r=s.finalize(r),s.reset();a.concat(r);}return a.sigBytes=4*l,a}}),t.EvpKDF=function(e,t,r){return o.create(r).compute(e,t)},e.EvpKDF;var t,r,i,n,s,a,o;}(Ol(),Ul(),ou())),du.exports}var fu,pu={exports:{}};function vu(){return fu||(fu=1,pu.exports=function(e){e.lib.Cipher||function(t){var r=e,i=r.lib,n=i.Base,s=i.WordArray,a=i.BufferedBlockAlgorithm,o=r.enc;o.Utf8;var l=o.Base64,u=r.algo.EvpKDF,c=i.Cipher=a.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset();},reset:function(){a.reset.call(this),this._doReset();},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return "string"==typeof e?b:y}return function(t){return {encrypt:function(r,i,n){return e(i).encrypt(t,r,i,n)},decrypt:function(r,i,n){return e(i).decrypt(t,r,i,n)}}}}()});i.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var d=r.mode={},h=i.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t;}}),f=d.CBC=function(){var e=h.extend();function r(e,r,i){var n,s=this._iv;s?(n=s,this._iv=t):n=this._prevBlock;for(var a=0;a<i;a++)e[r+a]^=n[a];}return e.Encryptor=e.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize;r.call(this,e,t,n),i.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n);}}),e.Decryptor=e.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,s=e.slice(t,t+n);i.decryptBlock(e,t),r.call(this,e,t,n),this._prevBlock=s;}}),e}(),p=(r.pad={}).Pkcs7={pad:function(e,t){for(var r=4*t,i=r-e.sigBytes%r,n=i<<24|i<<16|i<<8|i,a=[],o=0;o<i;o+=4)a.push(n);var l=s.create(a,i);e.concat(l);},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t;}};i.BlockCipher=c.extend({cfg:c.cfg.extend({mode:f,padding:p}),reset:function(){var e;c.reset.call(this);var t=this.cfg,r=t.iv,i=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=i.createEncryptor:(e=i.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,r&&r.words):(this._mode=e.call(i,this,r&&r.words),this._mode.__creator=e);},_doProcessBlock:function(e,t){this._mode.processBlock(e,t);},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4});var v=i.CipherParams=n.extend({init:function(e){this.mixIn(e);},toString:function(e){return (e||this.formatter).stringify(this)}}),g=(r.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;return (r?s.create([1398893684,1701076831]).concat(r).concat(t):t).toString(l)},parse:function(e){var t,r=l.parse(e),i=r.words;return 1398893684==i[0]&&1701076831==i[1]&&(t=s.create(i.slice(2,4)),i.splice(0,4),r.sigBytes-=16),v.create({ciphertext:r,salt:t})}},y=i.SerializableCipher=n.extend({cfg:n.extend({format:g}),encrypt:function(e,t,r,i){i=this.cfg.extend(i);var n=e.createEncryptor(r,i),s=n.finalize(t),a=n.cfg;return v.create({ciphertext:s,key:r,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,r,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(r,i).finalize(t.ciphertext)},_parse:function(e,t){return "string"==typeof e?t.parse(e,this):e}}),m=(r.kdf={}).OpenSSL={execute:function(e,t,r,i){i||(i=s.random(8));var n=u.create({keySize:t+r}).compute(e,i),a=s.create(n.words.slice(t),4*r);return n.sigBytes=4*t,v.create({key:n,iv:a,salt:i})}},b=i.PasswordBasedCipher=y.extend({cfg:y.cfg.extend({kdf:m}),encrypt:function(e,t,r,i){var n=(i=this.cfg.extend(i)).kdf.execute(r,e.keySize,e.ivSize);i.iv=n.iv;var s=y.encrypt.call(this,e,t,n.key,i);return s.mixIn(n),s},decrypt:function(e,t,r,i){i=this.cfg.extend(i),t=this._parse(t,i.format);var n=i.kdf.execute(r,e.keySize,e.ivSize,t.salt);return i.iv=n.iv,y.decrypt.call(this,e,t,n.key,i)}});}();}(Ol(),hu())),pu.exports}var gu,yu={exports:{}};function mu(){return gu?yu.exports:(gu=1,yu.exports=function(e){return e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();function r(e,t,r,i){var n,s=this._iv;s?(n=s.slice(0),this._iv=void 0):n=this._prevBlock,i.encryptBlock(n,0);for(var a=0;a<r;a++)e[t+a]^=n[a];}return t.Encryptor=t.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize;r.call(this,e,t,n,i),this._prevBlock=e.slice(t,t+n);}}),t.Decryptor=t.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,s=e.slice(t,t+n);r.call(this,e,t,n,i),this._prevBlock=s;}}),t}(),e.mode.CFB}(Ol(),vu()))}var bu,_u={exports:{}};function Eu(){return bu?_u.exports:(bu=1,_u.exports=function(e){return e.mode.CTR=(t=e.lib.BlockCipherMode.extend(),r=t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,n=this._iv,s=this._counter;n&&(s=this._counter=n.slice(0),this._iv=void 0);var a=s.slice(0);r.encryptBlock(a,0),s[i-1]=s[i-1]+1|0;for(var o=0;o<i;o++)e[t+o]^=a[o];}}),t.Decryptor=r,t),e.mode.CTR;var t,r;}(Ol(),vu()))}var wu,Ou={exports:{}};function Su(){return wu?Ou.exports:(wu=1,Ou.exports=function(e){
/** @preserve
			 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
			 * derived from CryptoJS.mode.CTR
			 * Jan Hruby jhruby.web@gmail.com
			 */
return e.mode.CTRGladman=function(){var t=e.lib.BlockCipherMode.extend();function r(e){if(255==(e>>24&255)){var t=e>>16&255,r=e>>8&255,i=255&e;255===t?(t=0,255===r?(r=0,255===i?i=0:++i):++r):++t,e=0,e+=t<<16,e+=r<<8,e+=i;}else e+=1<<24;return e}function i(e){return 0===(e[0]=r(e[0]))&&(e[1]=r(e[1])),e}var n=t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,s=this._iv,a=this._counter;s&&(a=this._counter=s.slice(0),this._iv=void 0),i(a);var o=a.slice(0);r.encryptBlock(o,0);for(var l=0;l<n;l++)e[t+l]^=o[l];}});return t.Decryptor=n,t}(),e.mode.CTRGladman}(Ol(),vu()))}var xu,ku={exports:{}};function Pu(){return xu?ku.exports:(xu=1,ku.exports=function(e){return e.mode.OFB=(t=e.lib.BlockCipherMode.extend(),r=t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,n=this._iv,s=this._keystream;n&&(s=this._keystream=n.slice(0),this._iv=void 0),r.encryptBlock(s,0);for(var a=0;a<i;a++)e[t+a]^=s[a];}}),t.Decryptor=r,t),e.mode.OFB;var t,r;}(Ol(),vu()))}var Au;var Ru;var ju;var Tu;var Fu;var Nu;var Lu;var zu;var Hu,Ku={exports:{}};function qu(){return Hu||(Hu=1,Ku.exports=function(e){return function(){var t=e,r=t.lib,i=r.WordArray,n=r.BlockCipher,s=t.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],o=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],c=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=s.DES=n.extend({_doReset:function(){for(var e=this._key.words,t=[],r=0;r<56;r++){var i=a[r]-1;t[r]=e[i>>>5]>>>31-i%32&1;}for(var n=this._subKeys=[],s=0;s<16;s++){var u=n[s]=[],c=l[s];for(r=0;r<24;r++)u[r/6|0]|=t[(o[r]-1+c)%28]<<31-r%6,u[4+(r/6|0)]|=t[28+(o[r+24]-1+c)%28]<<31-r%6;for(u[0]=u[0]<<1|u[0]>>>31,r=1;r<7;r++)u[r]=u[r]>>>4*(r-1)+3;u[7]=u[7]<<5|u[7]>>>27;}var d=this._invSubKeys=[];for(r=0;r<16;r++)d[r]=n[15-r];},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys);},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys);},_doCryptBlock:function(e,t,r){this._lBlock=e[t],this._rBlock=e[t+1],h.call(this,4,252645135),h.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),h.call(this,1,1431655765);for(var i=0;i<16;i++){for(var n=r[i],s=this._lBlock,a=this._rBlock,o=0,l=0;l<8;l++)o|=u[l][((a^n[l])&c[l])>>>0];this._lBlock=a,this._rBlock=s^o;}var d=this._lBlock;this._lBlock=this._rBlock,this._rBlock=d,h.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock;},keySize:2,ivSize:2,blockSize:2});function h(e,t){var r=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=r,this._lBlock^=r<<e;}function f(e,t){var r=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=r,this._rBlock^=r<<e;}t.DES=n._createHelper(d);var p=s.TripleDES=n.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),r=e.length<4?e.slice(0,2):e.slice(2,4),n=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=d.createEncryptor(i.create(t)),this._des2=d.createEncryptor(i.create(r)),this._des3=d.createEncryptor(i.create(n));},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t);},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t);},keySize:6,ivSize:2,blockSize:2});t.TripleDES=n._createHelper(p);}(),e.TripleDES}(Ol(),Ll(),hu(),vu())),Ku.exports}var Gu;var Xu;var Yu;_l.exports=function(e){return e}(Ol(),kl(),Il(),jl(),$l(),Ll(),Ul(),ql(),Gl||(Gl=1,function(e){return r=(t=e).lib.WordArray,i=t.algo,n=i.SHA256,s=i.SHA224=n.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]);},_doFinalize:function(){var e=n._doFinalize.call(this);return e.sigBytes-=4,e}}),t.SHA224=n._createHelper(s),t.HmacSHA224=n._createHmacHelper(s),e.SHA224;var t,r,i,n,s;}(Ol(),ql())),Yl(),Zl||(Zl=1,function(e){return r=(t=e).x64,i=r.Word,n=r.WordArray,s=t.algo,a=s.SHA512,o=s.SHA384=a.extend({_doReset:function(){this._hash=new n.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)]);},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=16,e}}),t.SHA384=a._createHelper(o),t.HmacSHA384=a._createHmacHelper(o),e.SHA384;var t,r,i,n,s,a,o;}(Ol(),kl(),Yl())),ru(),iu||(iu=1,function(e){
/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/
return function(t){var r=e,i=r.lib,n=i.WordArray,s=i.Hasher,a=r.algo,o=n.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=n.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=n.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),c=n.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=n.create([0,1518500249,1859775393,2400959708,2840853838]),h=n.create([1352829926,1548603684,1836072691,2053994217,0]),f=a.RIPEMD160=s.extend({_doReset:function(){this._hash=n.create([1732584193,4023233417,2562383102,271733878,3285377520]);},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var i=t+r,n=e[i];e[i]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8);}var s,a,f,_,E,w,O,S,x,k,P,A=this._hash.words,I=d.words,R=h.words,M=o.words,j=l.words,D=u.words,T=c.words;for(w=s=A[0],O=a=A[1],S=f=A[2],x=_=A[3],k=E=A[4],r=0;r<80;r+=1)P=s+e[t+M[r]]|0,P+=r<16?p(a,f,_)+I[0]:r<32?v(a,f,_)+I[1]:r<48?g(a,f,_)+I[2]:r<64?y(a,f,_)+I[3]:m(a,f,_)+I[4],P=(P=b(P|=0,D[r]))+E|0,s=E,E=_,_=b(f,10),f=a,a=P,P=w+e[t+j[r]]|0,P+=r<16?m(O,S,x)+R[0]:r<32?y(O,S,x)+R[1]:r<48?g(O,S,x)+R[2]:r<64?v(O,S,x)+R[3]:p(O,S,x)+R[4],P=(P=b(P|=0,T[r]))+k|0,w=k,k=x,x=b(S,10),S=O,O=P;P=A[1]+f+x|0,A[1]=A[2]+_+k|0,A[2]=A[3]+E+w|0,A[3]=A[4]+s+O|0,A[4]=A[0]+a+S|0,A[0]=P;},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(t.length+1),this._process();for(var n=this._hash,s=n.words,a=0;a<5;a++){var o=s[a];s[a]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);}return n},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,r){return e^t^r}function v(e,t,r){return e&t|~e&r}function g(e,t,r){return (e|~t)^r}function y(e,t,r){return e&r|t&~r}function m(e,t,r){return e^(t|~r)}function b(e,t){return e<<t|e>>>32-t}r.RIPEMD160=s._createHelper(f),r.HmacRIPEMD160=s._createHmacHelper(f);}(),e.RIPEMD160}(Ol())),ou(),lu||(lu=1,function(e){return i=(r=(t=e).lib).Base,n=r.WordArray,a=(s=t.algo).SHA1,o=s.HMAC,l=s.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e);},compute:function(e,t){for(var r=this.cfg,i=o.create(r.hasher,e),s=n.create(),a=n.create([1]),l=s.words,u=a.words,c=r.keySize,d=r.iterations;l.length<c;){var h=i.update(t).finalize(a);i.reset();for(var f=h.words,p=f.length,v=h,g=1;g<d;g++){v=i.finalize(v),i.reset();for(var y=v.words,m=0;m<p;m++)f[m]^=y[m];}s.concat(h),u[0]++;}return s.sigBytes=4*c,s}}),t.PBKDF2=function(e,t,r){return l.create(r).compute(e,t)},e.PBKDF2;var t,r,i,n,s,a,o,l;}(Ol(),Ul(),ou())),hu(),vu(),mu(),Eu(),Su(),Pu(),Au||(Au=1,function(e){return e.mode.ECB=((t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t);}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t);}}),t),e.mode.ECB;var t;}(Ol(),vu())),Ru||(Ru=1,function(e){return e.pad.AnsiX923={pad:function(e,t){var r=e.sigBytes,i=4*t,n=i-r%i,s=r+n-1;e.clamp(),e.words[s>>>2]|=n<<24-s%4*8,e.sigBytes+=n;},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t;}},e.pad.Ansix923}(Ol(),vu())),ju||(ju=1,function(e){return e.pad.Iso10126={pad:function(t,r){var i=4*r,n=i-t.sigBytes%i;t.concat(e.lib.WordArray.random(n-1)).concat(e.lib.WordArray.create([n<<24],1));},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t;}},e.pad.Iso10126}(Ol(),vu())),Tu||(Tu=1,function(e){return e.pad.Iso97971={pad:function(t,r){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,r);},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--;}},e.pad.Iso97971}(Ol(),vu())),Fu||(Fu=1,function(e){return e.pad.ZeroPadding={pad:function(e,t){var r=4*t;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r);},unpad:function(e){var t=e.words,r=e.sigBytes-1;for(r=e.sigBytes-1;r>=0;r--)if(t[r>>>2]>>>24-r%4*8&255){e.sigBytes=r+1;break}}},e.pad.ZeroPadding}(Ol(),vu())),Nu||(Nu=1,function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding}(Ol(),vu())),Lu||(Lu=1,function(e){return r=(t=e).lib.CipherParams,i=t.enc.Hex,t.format.Hex={stringify:function(e){return e.ciphertext.toString(i)},parse:function(e){var t=i.parse(e);return r.create({ciphertext:t})}},e.format.Hex;var t,r,i;}(Ol(),vu())),zu||(zu=1,function(e){return function(){var t=e,r=t.lib.BlockCipher,i=t.algo,n=[],s=[],a=[],o=[],l=[],u=[],c=[],d=[],h=[],f=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var r=0,i=0;for(t=0;t<256;t++){var p=i^i<<1^i<<2^i<<3^i<<4;p=p>>>8^255&p^99,n[r]=p,s[p]=r;var v=e[r],g=e[v],y=e[g],m=257*e[p]^16843008*p;a[r]=m<<24|m>>>8,o[r]=m<<16|m>>>16,l[r]=m<<8|m>>>24,u[r]=m,m=16843009*y^65537*g^257*v^16843008*r,c[p]=m<<24|m>>>8,d[p]=m<<16|m>>>16,h[p]=m<<8|m>>>24,f[p]=m,r?(r=v^e[e[e[y^v]]],i^=e[e[i]]):r=i=1;}}();var p=[0,1,2,4,8,16,32,64,128,27,54],v=i.AES=r.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,i=4*((this._nRounds=r+6)+1),s=this._keySchedule=[],a=0;a<i;a++)a<r?s[a]=t[a]:(u=s[a-1],a%r?r>6&&a%r==4&&(u=n[u>>>24]<<24|n[u>>>16&255]<<16|n[u>>>8&255]<<8|n[255&u]):(u=n[(u=u<<8|u>>>24)>>>24]<<24|n[u>>>16&255]<<16|n[u>>>8&255]<<8|n[255&u],u^=p[a/r|0]<<24),s[a]=s[a-r]^u);for(var o=this._invKeySchedule=[],l=0;l<i;l++){if(a=i-l,l%4)var u=s[a];else u=s[a-4];o[l]=l<4||a<=4?u:c[n[u>>>24]]^d[n[u>>>16&255]]^h[n[u>>>8&255]]^f[n[255&u]];}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,o,l,u,n);},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,c,d,h,f,s),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r;},_doCryptBlock:function(e,t,r,i,n,s,a,o){for(var l=this._nRounds,u=e[t]^r[0],c=e[t+1]^r[1],d=e[t+2]^r[2],h=e[t+3]^r[3],f=4,p=1;p<l;p++){var v=i[u>>>24]^n[c>>>16&255]^s[d>>>8&255]^a[255&h]^r[f++],g=i[c>>>24]^n[d>>>16&255]^s[h>>>8&255]^a[255&u]^r[f++],y=i[d>>>24]^n[h>>>16&255]^s[u>>>8&255]^a[255&c]^r[f++],m=i[h>>>24]^n[u>>>16&255]^s[c>>>8&255]^a[255&d]^r[f++];u=v,c=g,d=y,h=m;}v=(o[u>>>24]<<24|o[c>>>16&255]<<16|o[d>>>8&255]<<8|o[255&h])^r[f++],g=(o[c>>>24]<<24|o[d>>>16&255]<<16|o[h>>>8&255]<<8|o[255&u])^r[f++],y=(o[d>>>24]<<24|o[h>>>16&255]<<16|o[u>>>8&255]<<8|o[255&c])^r[f++],m=(o[h>>>24]<<24|o[u>>>16&255]<<16|o[c>>>8&255]<<8|o[255&d])^r[f++],e[t]=v,e[t+1]=g,e[t+2]=y,e[t+3]=m;},keySize:8});t.AES=r._createHelper(v);}(),e.AES}(Ol(),Ll(),hu(),vu())),qu(),Gu||(Gu=1,function(e){return function(){var t=e,r=t.lib.StreamCipher,i=t.algo,n=i.RC4=r.extend({_doReset:function(){for(var e=this._key,t=e.words,r=e.sigBytes,i=this._S=[],n=0;n<256;n++)i[n]=n;n=0;for(var s=0;n<256;n++){var a=n%r,o=t[a>>>2]>>>24-a%4*8&255;s=(s+i[n]+o)%256;var l=i[n];i[n]=i[s],i[s]=l;}this._i=this._j=0;},_doProcessBlock:function(e,t){e[t]^=s.call(this);},keySize:8,ivSize:0});function s(){for(var e=this._S,t=this._i,r=this._j,i=0,n=0;n<4;n++){r=(r+e[t=(t+1)%256])%256;var s=e[t];e[t]=e[r],e[r]=s,i|=e[(e[t]+e[r])%256]<<24-8*n;}return this._i=t,this._j=r,i}t.RC4=r._createHelper(n);var a=i.RC4Drop=n.extend({cfg:n.cfg.extend({drop:192}),_doReset:function(){n._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)s.call(this);}});t.RC4Drop=r._createHelper(a);}(),e.RC4}(Ol(),Ll(),hu(),vu())),Xu||(Xu=1,function(e){return function(){var t=e,r=t.lib.StreamCipher,i=t.algo,n=[],s=[],a=[],o=i.Rabbit=r.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,r=0;r<4;r++)e[r]=16711935&(e[r]<<8|e[r]>>>24)|4278255360&(e[r]<<24|e[r]>>>8);var i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,r=0;r<4;r++)l.call(this);for(r=0;r<8;r++)n[r]^=i[r+4&7];if(t){var s=t.words,a=s[0],o=s[1],u=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),c=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),d=u>>>16|4294901760&c,h=c<<16|65535&u;for(n[0]^=u,n[1]^=d,n[2]^=c,n[3]^=h,n[4]^=u,n[5]^=d,n[6]^=c,n[7]^=h,r=0;r<4;r++)l.call(this);}},_doProcessBlock:function(e,t){var r=this._X;l.call(this),n[0]=r[0]^r[5]>>>16^r[3]<<16,n[1]=r[2]^r[7]>>>16^r[5]<<16,n[2]=r[4]^r[1]>>>16^r[7]<<16,n[3]=r[6]^r[3]>>>16^r[1]<<16;for(var i=0;i<4;i++)n[i]=16711935&(n[i]<<8|n[i]>>>24)|4278255360&(n[i]<<24|n[i]>>>8),e[t+i]^=n[i];},blockSize:4,ivSize:2});function l(){for(var e=this._X,t=this._C,r=0;r<8;r++)s[r]=t[r];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0)|0,this._b=t[7]>>>0<s[7]>>>0?1:0,r=0;r<8;r++){var i=e[r]+t[r],n=65535&i,o=i>>>16,l=((n*n>>>17)+n*o>>>15)+o*o,u=((4294901760&i)*i|0)+((65535&i)*i|0);a[r]=l^u;}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0;}t.Rabbit=r._createHelper(o);}(),e.Rabbit}(Ol(),Ll(),hu(),vu())),Yu||(Yu=1,function(e){return function(){var t=e,r=t.lib.StreamCipher,i=t.algo,n=[],s=[],a=[],o=i.RabbitLegacy=r.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var n=0;n<4;n++)l.call(this);for(n=0;n<8;n++)i[n]^=r[n+4&7];if(t){var s=t.words,a=s[0],o=s[1],u=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),c=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),d=u>>>16|4294901760&c,h=c<<16|65535&u;for(i[0]^=u,i[1]^=d,i[2]^=c,i[3]^=h,i[4]^=u,i[5]^=d,i[6]^=c,i[7]^=h,n=0;n<4;n++)l.call(this);}},_doProcessBlock:function(e,t){var r=this._X;l.call(this),n[0]=r[0]^r[5]>>>16^r[3]<<16,n[1]=r[2]^r[7]>>>16^r[5]<<16,n[2]=r[4]^r[1]>>>16^r[7]<<16,n[3]=r[6]^r[3]>>>16^r[1]<<16;for(var i=0;i<4;i++)n[i]=16711935&(n[i]<<8|n[i]>>>24)|4278255360&(n[i]<<24|n[i]>>>8),e[t+i]^=n[i];},blockSize:4,ivSize:2});function l(){for(var e=this._X,t=this._C,r=0;r<8;r++)s[r]=t[r];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0)|0,this._b=t[7]>>>0<s[7]>>>0?1:0,r=0;r<8;r++){var i=e[r]+t[r],n=65535&i,o=i>>>16,l=((n*n>>>17)+n*o>>>15)+o*o,u=((4294901760&i)*i|0)+((65535&i)*i|0);a[r]=l^u;}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0;}t.RabbitLegacy=r._createHelper(o);}(),e.RabbitLegacy}(Ol(),Ll(),hu(),vu())));var Qu=_l.exports,tc=function(e){return e.enc.Hex}(Ol());Object.defineProperty(bl,"__esModule",{value:!0});const rc=Qu,ic=Cl,nc=tc;bl.default=class{constructor(e){let t;switch(e){case"sha1":t=rc.algo.SHA1;break;case"sha256":t=rc.algo.SHA256;break;default:throw new Error("unsupported hash algorithm. Only sha1 and sha256 are supported.")}this.cryptoJSHasher=t.create();}digest(e){const t=this.cryptoJSHasher.finalize();let r;switch(e){case"base64":r=ic.default;break;case"hex":r=nc.default;break;default:throw new Error("unsupported output encoding. Only base64 and hex are supported.")}return t.toString(r)}update(e){return this.cryptoJSHasher.update(e),this}};var sc={};Object.defineProperty(sc,"__esModule",{value:!0});const ac=Qu;sc.default=class{constructor(e,t){let r;switch(e){case"sha1":r=ac.algo.SHA1;break;case"sha256":r=ac.algo.SHA256;break;default:throw new Error("unsupported hash algorithm. Only sha1 and sha256 are supported.")}this.CryptoJSHmac=ac.algo.HMAC.create(r,t);}digest(e){const t=this.CryptoJSHmac.finalize();if("base64"===e)return t.toString(CryptoJS.enc.Base64);if("hex"===e)return t.toString(CryptoJS.enc.Hex);throw new Error("unsupported output encoding. Only base64 and hex are supported.")}update(e){return this.CryptoJSHmac.update(e),this}},Object.defineProperty(yl,"__esModule",{value:!0});const oc=ml,lc=bl,uc=sc;yl.default=class{createHash(e){return new lc.default(e)}createHmac(e,t){return new uc.default(e,t)}randomUUID(){const e=new Uint32Array(1);return oc.crypto.getRandomValues(e),e.join()}};var cc={};Object.defineProperty(cc,"__esModule",{value:!0});const dc=n;class hc{constructor(){this.headers={},this.status=0;}text(){return Promise.resolve("")}json(){return Promise.resolve({})}}cc.default=class{fetch(e,t={}){return Promise.resolve(new hc)}createEventSource(e,t){return new dc.NullEventSource(e,t)}},Object.defineProperty(gl,"__esModule",{value:!0});const fc=yl,pc=cc;gl.default=class{constructor(e){this.crypto=new fc.default,this.requests=new pc.default,this.info=e;}};var vc={};Object.defineProperty(vc,"__esModule",{value:!0});class gc{constructor(e,t,r){this.platformName=e,this.sdkName=t,this.sdkVersion=r;}platformData(){return {name:this.platformName}}sdkData(){return {name:this.sdkName,version:this.sdkVersion,userAgentBase:"AkamaiEdgeSDK"}}}vc.default=(e,t,r)=>new gc(e,t,r),function(e){var r=t&&t.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n);}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r];}),i=t&&t.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i);};Object.defineProperty(e,"__esModule",{value:!0}),e.init=e.EdgeFeatureStore=void 0;const s=n,a=al,o=pl;Object.defineProperty(e,"EdgeFeatureStore",{enumerable:!0,get:function(){return o.EdgeFeatureStore}});const l=vl,u=gl,c=vc,d=ol;i(n,e);e.init=e=>{var t;const{sdkKey:r,options:i={},featureStoreProvider:n,platformName:h,sdkName:f,sdkVersion:p}=e,v=null!==(t=i.logger)&&void 0!==t?t:s.BasicLogger.get(),g=new l.default(n,(0, o.buildRootKey)(r)),y=new o.EdgeFeatureStore(g,r,"Akamai",v),m=Object.assign({featureStore:y,logger:v},i);(0, d.validateOptions)(e.sdkKey,m);const b=(0, c.default)(h,f,p);return new a.default(r,new u.default(b),m,g)};}(i);const yc=({options:e={},sdkKey:t,featureStoreProvider:r})=>i.init({sdkKey:t,options:e,featureStoreProvider:r,platformName:"Akamai EdgeWorker",sdkName:"@launchdarkly/akamai-server-base-sdk",sdkVersion:"1.0.7"});

export { yc as y };
